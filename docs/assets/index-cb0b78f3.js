var Oc=Object.defineProperty;var Cc=(r,e,t)=>e in r?Oc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var qr=(r,e,t)=>(Cc(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function Ue(){}function Rc(r,e){for(const t in e)r[t]=e[t];return r}function xi(r){return r()}function Za(){return Object.create(null)}function jt(r){r.forEach(xi)}function Ai(r){return typeof r=="function"}function ar(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Fc(r){return Object.keys(r).length===0}function Pc(r,...e){if(r==null){for(const n of e)n(void 0);return Ue}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ot(r,e,t){r.$$.on_destroy.push(Pc(e,t))}function Jt(r,e,t,n){if(r){const i=Ni(r,e,t,n);return r[0](i)}}function Ni(r,e,t,n){return r[1]&&n?Rc(t.ctx.slice(),r[1](n(e))):t.ctx}function Xt(r,e,t,n){if(r[2]&&n){const i=r[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],u=Math.max(e.dirty.length,i.length);for(let m=0;m<u;m+=1)l[m]=e.dirty[m]|i[m];return l}return e.dirty|i}return e.dirty}function Qt(r,e,t,n,i,l){if(i){const u=Ni(e,t,n,l);r.p(u,i)}}function er(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Ya(r){return r??""}function K(r,e){r.appendChild(e)}function ve(r,e,t){r.insertBefore(e,t||null)}function ue(r){r.parentNode&&r.parentNode.removeChild(r)}function nn(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function oe(r){return document.createElement(r)}function Pe(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ir(r){return document.createTextNode(r)}function je(){return ir(" ")}function an(){return ir("")}function Wr(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function M(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Ec(r){return Array.from(r.childNodes)}function ki(r,e){e=""+e,r.data!==e&&(r.data=e)}function Ja(r,e){r.value=e??""}function le(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}let Zt;function Tc(){if(Zt===void 0){Zt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Zt=!0}}return Zt}function Mc(r,e){getComputedStyle(r).position==="static"&&(r.style.position="relative");const n=oe("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=Tc();let l;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=Wr(window,"message",u=>{u.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{l=Wr(n.contentWindow,"resize",e),e()}),K(r,n),()=>{(i||l&&n.contentWindow)&&l(),ue(n)}}let sn;function Mt(r){sn=r}const Lt=[],Xa=[];let $t=[];const Qa=[],Dc=Promise.resolve();let Kr=!1;function jc(){Kr||(Kr=!0,Dc.then(Li))}function tr(r){$t.push(r)}const Hr=new Set;let xt=0;function Li(){if(xt!==0)return;const r=sn;do{try{for(;xt<Lt.length;){const e=Lt[xt];xt++,Mt(e),Bc(e.$$)}}catch(e){throw Lt.length=0,xt=0,e}for(Mt(null),Lt.length=0,xt=0;Xa.length;)Xa.pop()();for(let e=0;e<$t.length;e+=1){const t=$t[e];Hr.has(t)||(Hr.add(t),t())}$t.length=0}while(Lt.length);for(;Qa.length;)Qa.pop()();Kr=!1,Hr.clear(),Mt(r)}function Bc(r){if(r.fragment!==null){r.update(),jt(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(tr)}}function Gc(r){const e=[],t=[];$t.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),$t=e}const Yt=new Set;let lt;function sr(){lt={r:0,c:[],p:lt}}function or(){lt.r||jt(lt.c),lt=lt.p}function J(r,e){r&&r.i&&(Yt.delete(r),r.i(e))}function re(r,e,t,n){if(r&&r.o){if(Yt.has(r))return;Yt.add(r),lt.c.push(()=>{Yt.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function Ot(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Se(r){r&&r.c()}function ye(r,e,t){const{fragment:n,after_update:i}=r.$$;n&&n.m(e,t),tr(()=>{const l=r.$$.on_mount.map(xi).filter(Ai);r.$$.on_destroy?r.$$.on_destroy.push(...l):jt(l),r.$$.on_mount=[]}),i.forEach(tr)}function _e(r,e){const t=r.$$;t.fragment!==null&&(Gc(t.after_update),jt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function qc(r,e){r.$$.dirty[0]===-1&&(Lt.push(r),jc(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function on(r,e,t,n,i,l,u,m=[-1]){const h=sn;Mt(r);const b=r.$$={fragment:null,ctx:[],props:l,update:Ue,not_equal:i,bound:Za(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:Za(),dirty:m,skip_bound:!1,root:e.target||h.$$.root};u&&u(b.root);let I=!1;if(b.ctx=t?t(r,e.props||{},(y,_,...k)=>{const L=k.length?k[0]:_;return b.ctx&&i(b.ctx[y],b.ctx[y]=L)&&(!b.skip_bound&&b.bound[y]&&b.bound[y](L),I&&qc(r,y)),_}):[],b.update(),I=!0,jt(b.before_update),b.fragment=n?n(b.ctx):!1,e.target){if(e.hydrate){const y=Ec(e.target);b.fragment&&b.fragment.l(y),y.forEach(ue)}else b.fragment&&b.fragment.c();e.intro&&J(r.$$.fragment),ye(r,e.target,e.anchor),Li()}Mt(h)}class ln{constructor(){qr(this,"$$");qr(this,"$$set")}$destroy(){_e(this,1),this.$destroy=Ue}$on(e,t){if(!Ai(t))return Ue;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Fc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Hc="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Hc);const At=[];function Ve(r,e=Ue){let t;const n=new Set;function i(m){if(ar(r,m)&&(r=m,t)){const h=!At.length;for(const b of n)b[1](),At.push(b,r);if(h){for(let b=0;b<At.length;b+=2)At[b][0](At[b+1]);At.length=0}}}function l(m){i(m(r))}function u(m,h=Ue){const b=[m,h];return n.add(b),n.size===1&&(t=e(i,l)||Ue),m(r),()=>{n.delete(b),n.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:u}}function $e(r){const e=r||"";return function(){throw new Error("this method "+e+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function rt(r,e){if(!r)throw new Error(e||"Assertion failed")}function Zr(r,e,t){let n;Object.defineProperty(r,e,{get(){return n||(n=t.call(this)),n}})}function zc(r){return r&&Object.assign({},r)}function $i(r,e){const t=[];for(;e-- >0;)t.push(r());return t}function Oi(r,e){return new Array(e+1).join(r)}function lr(r,e){return $i(()=>r,e)}function Yr(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];r.lastIndexOf(n)!==t&&e.indexOf(n)<0&&e.push(n)}return e}function Ci(r){const e=[];return r.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e}function ut(r){const e=r[0];return e===e.toUpperCase()}function Ri(r){return!ut(r)}function Fi(r,e,t){const n=t||" ";return r.length<e?Oi(n,e-r.length)+r:r}function ct(){this.strings=[]}ct.prototype.append=function(r){this.strings.push(r)};ct.prototype.contents=function(){return this.strings.join("")};const zr=r=>String.fromCodePoint(parseInt(r,16));function Pi(r){if(r.charAt(0)==="\\")switch(r.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return zr(r.slice(2,4));case"u":return r.charAt(2)==="{"?zr(r.slice(3,-1)):zr(r.slice(2,6));default:return r.charAt(1)}else return r}function un(r){if(r==null)return String(r);const e=Object.prototype.toString.call(r);try{let t;return r.constructor&&r.constructor.name?t=r.constructor.name:e.indexOf("[object ")===0?t=e.slice(8,-1):t=typeof r,t+": "+JSON.stringify(String(r))}catch{return e}}const Uc=Object.freeze(Object.defineProperty({__proto__:null,StringBuffer:ct,abstract:$e,assert:rt,clone:zc,copyWithoutDuplicates:Ci,defineLazyProperty:Zr,getDuplicates:Yr,isLexical:Ri,isSyntactic:ut,padLeft:Fi,repeat:lr,repeatFn:$i,repeatStr:Oi,unescapeCodePoint:Pi,unexpectedObjToString:un},Symbol.toStringTag,{value:"Module"})),Vc={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class D{constructor(){if(this.constructor===D)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}const xe=Object.create(D.prototype),Ae=Object.create(D.prototype);class Ie extends D{constructor(e){super(),this.obj=e}}class Ne extends D{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=e.length>1||t.length>1}}class ke extends D{constructor(e){super(),this.index=e}}class ce extends D{constructor(e){super(),this.terms=e}}class ur extends ce{constructor(e,t,n){const i=e.rules[t].body;super([n,i]),this.superGrammar=e,this.name=t,this.body=n}}class cr extends ce{constructor(e,t,n,i){const l=e.rules[t].body;super([...n,l,...i]),this.superGrammar=e,this.ruleName=t,this.expansionPos=n.length}}class he extends D{constructor(e){super(),this.factors=e}}class Oe extends D{constructor(e){super(),this.expr=e}}class pt extends Oe{}class Ct extends Oe{}class Ze extends Oe{}pt.prototype.operator="*";Ct.prototype.operator="+";Ze.prototype.operator="?";pt.prototype.minNumMatches=0;Ct.prototype.minNumMatches=1;Ze.prototype.minNumMatches=0;pt.prototype.maxNumMatches=Number.POSITIVE_INFINITY;Ct.prototype.maxNumMatches=Number.POSITIVE_INFINITY;Ze.prototype.maxNumMatches=1;class Ce extends D{constructor(e){super(),this.expr=e}}class Re extends D{constructor(e){super(),this.expr=e}}class Te extends D{constructor(e){super(),this.expr=e}}class te extends D{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return ut(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class be extends D{constructor(e){super(),this.category=e,this.pattern=Vc[e]}}function ie(r,e){let t;return e?(t=new Error(e.getLineAndColumnMessage()+r),t.shortMessage=r,t.interval=e):t=new Error(r),t}function Jr(){return ie("Interval sources don't match")}function Wc(r){const e=new Error;return Object.defineProperty(e,"message",{enumerable:!0,get(){return r.message}}),Object.defineProperty(e,"shortMessage",{enumerable:!0,get(){return"Expected "+r.getExpectedText()}}),e.interval=r.getInterval(),e}function Kc(r,e,t){const n=e?`Grammar ${r} is not declared in namespace '${e}'`:"Undeclared grammar "+r;return ie(n,t)}function Zc(r,e){return ie("Grammar "+r.name+" is already declared in this namespace")}function Yc(r){return ie(`Grammar '${r.name}' does not support incremental parsing`)}function Ei(r,e,t){return ie("Rule "+r+" is not declared in grammar "+e,t)}function Jc(r,e,t){return ie("Cannot override rule "+r+" because it is not declared in "+e,t)}function Xc(r,e,t){return ie("Cannot extend rule "+r+" because it is not declared in "+e,t)}function ei(r,e,t,n){let i="Duplicate declaration for rule '"+r+"' in grammar '"+e+"'";return e!==t&&(i+=" (originally declared in '"+t+"')"),ie(i,n)}function Ti(r,e,t,n){return ie("Wrong number of parameters for rule "+r+" (expected "+e+", got "+t+")",n)}function Qc(r,e,t,n){return ie("Wrong number of arguments for rule "+r+" (expected "+e+", got "+t+")",n)}function ti(r,e,t){return ie("Duplicate parameter names in rule "+r+": "+e.join(", "),t)}function ep(r,e){return ie("Invalid parameter to rule "+r+": "+e+" has arity "+e.getArity()+", but parameter expressions must have arity 1",e.source)}const tp="NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.";function rp(r,e){return ie("Cannot apply syntactic rule "+r+" from here (inside a lexical context)",e.source)}function np(r){const{ruleName:e}=r;return ie(`applySyntactic is for syntactic rules, but '${e}' is a lexical rule. `+tp,r.source)}function ap(r){return ie("applySyntactic is not required here (in a syntactic context)",r.source)}function ri(r,e){return ie("Incorrect argument type: expected "+r,e.source)}function ip(r){return ie("'...' can appear at most once in a rule body",r.source)}function sp(r){const e=r._node;rt(e&&e.isNonterminal()&&e.ctorName==="escapeChar_unicodeCodePoint");const t=r.children.slice(1,-1).map(i=>i.source),n=t[0].coverageWith(...t.slice(1));return ie(`U+${n.contents} is not a valid Unicode code point`,n)}function Mi(r,e){const t=e.length>0?e[e.length-1].args:[];let i="Nullable expression "+r.expr.substituteParams(t)+" is not allowed inside '"+r.operator+"' (possible infinite loop)";if(e.length>0){const l=e.map(u=>new te(u.ruleName,u.args)).join(`
`);i+=`
Application stack (most recent application last):
`+l}return ie(i,r.expr.source)}function Di(r,e,t,n){return ie("Rule "+r+" involves an alternation which has inconsistent arity (expected "+e+", got "+t+")",n.source)}function op(r){const e=r.map(t=>t.message);return ie(["Errors:"].concat(e).join(`
- `),r[0].interval)}function lp(r,e,t,n){let i=n.slice(0,-1).map(h=>{const b="  "+h[0].name+" > "+h[1];return h.length===3?b+" for '"+h[2]+"'":b}).join(`
`);i+=`
  `+e+" > "+r;let l="";r==="_iter"&&(l=[`
NOTE: as of Ohm v16, there is no default action for iteration nodes — see `,"  https://ohmjs.org/d/dsa for details."].join(`
`));const u=[`Missing semantic action for '${r}' in ${t} '${e}'.${l}`,"Action stack (most recent call last):",i].join(`
`),m=ie(u);return m.name="missingSemanticAction",m}function up(r){if(r.length===1)throw r[0];if(r.length>1)throw op(r)}function cp(r){let e=0;return r.map(n=>{const i=n.toString();return e=Math.max(e,i.length),i}).map(n=>Fi(n,e))}function ni(r,e,t){const n=r.length,i=r.slice(0,t),l=r.slice(t+e.length);return(i+e+l).substr(0,n)}function pp(...r){const e=this,{offset:t}=e,{repeatStr:n}=Uc,i=new ct;i.append("Line "+e.lineNum+", col "+e.colNum+`:
`);const l=cp([e.prevLine==null?0:e.lineNum-1,e.lineNum,e.nextLine==null?0:e.lineNum+1]),u=(I,y,_)=>{i.append(_+l[I]+" | "+y+`
`)};e.prevLine!=null&&u(0,e.prevLine,"  "),u(1,e.line,"> ");const m=e.line.length;let h=n(" ",m+1);for(let I=0;I<r.length;++I){let y=r[I][0],_=r[I][1];rt(y>=0&&y<=_,"range start must be >= 0 and <= end");const k=t-e.colNum+1;y=Math.max(0,y-k),_=Math.min(_-k,m),h=ni(h,n("~",_-y),y)}const b=2+l[1].length+3;return i.append(n(" ",b)),h=ni(h,"^",e.colNum-1),i.append(h.replace(/ +$/,"")+`
`),e.nextLine!=null&&u(2,e.nextLine,"  "),i.contents()}let Xr=[];function ji(r){Xr.push(r)}function fp(r){Xr.forEach(e=>{e(r)}),Xr=null}function cn(r,e){let t=1,n=1,i=0,l=0,u=null,m=null,h=-1;for(;i<e;){const y=r.charAt(i++);y===`
`?(t++,n=1,h=l,l=i):y!=="\r"&&n++}let b=r.indexOf(`
`,l);if(b===-1)b=r.length;else{const y=r.indexOf(`
`,b+1);u=y===-1?r.slice(b):r.slice(b,y),u=u.replace(/^\r?\n/,"").replace(/\r$/,"")}h>=0&&(m=r.slice(h,l).replace(/\r?\n$/,""));const I=r.slice(l,b).replace(/\r$/,"");return{offset:e,lineNum:t,colNum:n,line:I,prevLine:m,nextLine:u,toString:pp}}function pn(r,e,...t){return cn(r,e).toString(...t)}const ai=(()=>{let r=0;return e=>""+e+r++})();class we{constructor(e,t,n){this.sourceString=e,this.startIdx=t,this.endIdx=n}get contents(){return this._contents===void 0&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return we.coverage(...e,this)}collapsedLeft(){return new we(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new we(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return cn(this.sourceString,this.startIdx)}getLineAndColumnMessage(){const e=[this.startIdx,this.endIdx];return pn(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw Jr();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new we(this.sourceString,this.startIdx,e.startIdx),new we(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new we(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new we(this.sourceString,this.startIdx,e.startIdx)]:[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw Jr();return rt(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new we(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){const{contents:e}=this,t=this.startIdx+e.match(/^\s*/)[0].length,n=this.endIdx-e.match(/\s*$/)[0].length;return new we(this.sourceString,t,n)}subInterval(e,t){const n=this.startIdx+e;return new we(this.sourceString,n,n+t)}}we.coverage=function(r,...e){let{startIdx:t,endIdx:n}=r;for(const i of e){if(i.sourceString!==r.sourceString)throw Jr();t=Math.min(t,i.startIdx),n=Math.max(n,i.endIdx)}return new we(r.sourceString,t,n)};const hp=65535;class pr{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){const e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){const e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){const e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){const e=this.source.slice(this.pos++).codePointAt(0);return e>hp&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let n;if(t){for(n=0;n<e.length;n++){const i=this.next(),l=e[n];if(i==null||i.toUpperCase()!==l.toUpperCase())return!1}return!0}for(n=0;n<e.length;n++)if(this.next()!==e[n])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new we(this.source,e,t||this.pos)}}class Bi{constructor(e,t,n,i,l,u,m){this.matcher=e,this.input=t,this.startExpr=n,this._cst=i,this._cstOffset=l,this._rightmostFailurePosition=u,this._rightmostFailures=m,this.failed()&&(Zr(this,"message",function(){const h="Expected "+this.getExpectedText();return pn(this.input,this.getRightmostFailurePosition())+h}),Zr(this,"shortMessage",function(){const h="expected "+this.getExpectedText(),b=cn(this.input,this.getRightmostFailurePosition());return"Line "+b.lineNum+", col "+b.colNum+": "+h}))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);const e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");const e=new ct;let t=this.getRightmostFailures();t=t.filter(n=>!n.isFluffy());for(let n=0;n<t.length;n++)n>0&&(n===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[n].toString());return e.contents()}getInterval(){const e=this.getRightmostFailurePosition();return new we(this.input,e,e)}}class dp{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;const{applicationMemoKeyStack:n}=this,i=n.indexOf(e.toMemoKey())+1,l=n.slice(i);t.isInvolved=function(u){return l.indexOf(u)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let u=i;u<n.length;u++){const m=n[u];this.isInvolved(m)||l.push(m)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;const{applicationMemoKeyStack:t}=this;for(let n=0;n<t.length;n++){const i=t[n];if(e.isInvolved(i))return!1}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;const{memo:n}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach(i=>{const l=n[i];e+l.examinedLength>t?delete n[i]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,l.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,l.rightmostFailureOffset))})}}const mp="✗",gp="✓",vp="⋅",bp="⇒",yp="␉",_p="␊",Ip="␍",Qr={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function wp(r){return lr(" ",r).join("")}function Sp(r,e,t){const n=Gi(r.slice(e,e+t));return n.length<t?n+lr(" ",t-n.length).join(""):n}function Gi(r){return typeof r=="string"?r.replace(/ /g,vp).replace(/\t/g,yp).replace(/\n/g,_p).replace(/\r/g,Ip):String(r)}class tt{constructor(e,t,n,i,l,u,m){this.input=e,this.pos=this.pos1=t,this.pos2=n,this.source=new we(e,t,n),this.expr=i,this.bindings=u,this.children=m||[],this.terminatingLREntry=null,this._flags=l?Qr.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){const t=new tt(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t}recordLRTermination(e,t){this.terminatingLREntry=new tt(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,t){let n=e;typeof n=="function"&&(n={enter:n});function i(l,u,m){let h=!0;n.enter&&n.enter.call(t,l,u,m)===tt.prototype.SKIP&&(h=!1),h&&(l.children.forEach(b=>{i(b,l,m+1)}),n.exit&&n.exit.call(t,l,u,m))}this.isRootNode?this.children.forEach(l=>{i(l,null,0)}):i(this,null,0)}toString(){const e=new ct;return this.walk((t,n,i)=>{if(!t)return this.SKIP;if(t.expr.constructor.name!=="Alt"){if(e.append(Sp(t.input,t.pos,10)+wp(i*2+1)),e.append((t.succeeded?gp:mp)+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){const u=Gi(t.source.contents);e.append(" "+bp+"  "),e.append(typeof u=="string"?'"'+u+'"':u)}e.append(`
`)}}),e.contents()}}tt.prototype.SKIP={};Object.keys(Qr).forEach(r=>{const e=Qr[r];Object.defineProperty(tt.prototype,r,{get(){return(this._flags&e)!==0},set(t){t?this._flags|=e:this._flags&=~e}})});D.prototype.allowsSkippingPrecedingSpace=$e("allowsSkippingPrecedingSpace");xe.allowsSkippingPrecedingSpace=Ae.allowsSkippingPrecedingSpace=te.prototype.allowsSkippingPrecedingSpace=Ie.prototype.allowsSkippingPrecedingSpace=Ne.prototype.allowsSkippingPrecedingSpace=be.prototype.allowsSkippingPrecedingSpace=function(){return!0};ce.prototype.allowsSkippingPrecedingSpace=Oe.prototype.allowsSkippingPrecedingSpace=Te.prototype.allowsSkippingPrecedingSpace=Re.prototype.allowsSkippingPrecedingSpace=Ce.prototype.allowsSkippingPrecedingSpace=ke.prototype.allowsSkippingPrecedingSpace=he.prototype.allowsSkippingPrecedingSpace=function(){return!1};let Et;ji(r=>{Et=r});let rr;D.prototype.assertAllApplicationsAreValid=function(r,e){rr=0,this._assertAllApplicationsAreValid(r,e)};D.prototype._assertAllApplicationsAreValid=$e("_assertAllApplicationsAreValid");xe._assertAllApplicationsAreValid=Ae._assertAllApplicationsAreValid=Ie.prototype._assertAllApplicationsAreValid=Ne.prototype._assertAllApplicationsAreValid=ke.prototype._assertAllApplicationsAreValid=be.prototype._assertAllApplicationsAreValid=function(r,e){};Te.prototype._assertAllApplicationsAreValid=function(r,e){rr++,this.expr._assertAllApplicationsAreValid(r,e),rr--};ce.prototype._assertAllApplicationsAreValid=function(r,e){for(let t=0;t<this.terms.length;t++)this.terms[t]._assertAllApplicationsAreValid(r,e)};he.prototype._assertAllApplicationsAreValid=function(r,e){for(let t=0;t<this.factors.length;t++)this.factors[t]._assertAllApplicationsAreValid(r,e)};Oe.prototype._assertAllApplicationsAreValid=Ce.prototype._assertAllApplicationsAreValid=Re.prototype._assertAllApplicationsAreValid=function(r,e){this.expr._assertAllApplicationsAreValid(r,e)};te.prototype._assertAllApplicationsAreValid=function(r,e,t=!1){const n=e.rules[this.ruleName],i=ut(r)&&rr===0;if(!n)throw Ei(this.ruleName,e.name,this.source);if(!t&&ut(this.ruleName)&&!i)throw rp(this.ruleName,this);const l=this.args.length,u=n.formals.length;if(l!==u)throw Qc(this.ruleName,u,l,this.source);const m=Et&&n===Et.rules.applySyntactic;if(Et&&n===Et.rules.caseInsensitive&&!(this.args[0]instanceof Ie))throw ri('a Terminal (e.g. "abc")',this.args[0]);if(m){const b=this.args[0];if(!(b instanceof te))throw ri("a syntactic rule application",b);if(!ut(b.ruleName))throw np(b);if(i)throw ap(this)}this.args.forEach(b=>{if(b._assertAllApplicationsAreValid(r,e,m),b.getArity()!==1)throw ep(this.ruleName,b)})};D.prototype.assertChoicesHaveUniformArity=$e("assertChoicesHaveUniformArity");xe.assertChoicesHaveUniformArity=Ae.assertChoicesHaveUniformArity=Ie.prototype.assertChoicesHaveUniformArity=Ne.prototype.assertChoicesHaveUniformArity=ke.prototype.assertChoicesHaveUniformArity=Te.prototype.assertChoicesHaveUniformArity=be.prototype.assertChoicesHaveUniformArity=function(r){};ce.prototype.assertChoicesHaveUniformArity=function(r){if(this.terms.length===0)return;const e=this.terms[0].getArity();for(let t=0;t<this.terms.length;t++){const n=this.terms[t];n.assertChoicesHaveUniformArity();const i=n.getArity();if(e!==i)throw Di(r,e,i,n)}};ur.prototype.assertChoicesHaveUniformArity=function(r){const e=this.terms[0].getArity(),t=this.terms[1].getArity();if(e!==t)throw Di(r,t,e,this.terms[0])};he.prototype.assertChoicesHaveUniformArity=function(r){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(r)};Oe.prototype.assertChoicesHaveUniformArity=function(r){this.expr.assertChoicesHaveUniformArity(r)};Ce.prototype.assertChoicesHaveUniformArity=function(r){};Re.prototype.assertChoicesHaveUniformArity=function(r){this.expr.assertChoicesHaveUniformArity(r)};te.prototype.assertChoicesHaveUniformArity=function(r){};D.prototype.assertIteratedExprsAreNotNullable=$e("assertIteratedExprsAreNotNullable");xe.assertIteratedExprsAreNotNullable=Ae.assertIteratedExprsAreNotNullable=Ie.prototype.assertIteratedExprsAreNotNullable=Ne.prototype.assertIteratedExprsAreNotNullable=ke.prototype.assertIteratedExprsAreNotNullable=be.prototype.assertIteratedExprsAreNotNullable=function(r){};ce.prototype.assertIteratedExprsAreNotNullable=function(r){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(r)};he.prototype.assertIteratedExprsAreNotNullable=function(r){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(r)};Oe.prototype.assertIteratedExprsAreNotNullable=function(r){if(this.expr.assertIteratedExprsAreNotNullable(r),this.expr.isNullable(r))throw Mi(this,[])};Ze.prototype.assertIteratedExprsAreNotNullable=Ce.prototype.assertIteratedExprsAreNotNullable=Re.prototype.assertIteratedExprsAreNotNullable=Te.prototype.assertIteratedExprsAreNotNullable=function(r){this.expr.assertIteratedExprsAreNotNullable(r)};te.prototype.assertIteratedExprsAreNotNullable=function(r){this.args.forEach(e=>{e.assertIteratedExprsAreNotNullable(r)})};class fn{constructor(e){this.matchLength=e}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(this.numChildren()!==1)throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(t===0)throw new Error("cannot get child before first child");return this.childAt(t-1)}childAfter(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(t===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(t+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class ft extends fn{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}}class xp extends fn{constructor(e,t,n,i){super(i),this.ruleName=e,this.children=t,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return Ri(this.ctorName)}isSyntactic(){return ut(this.ctorName)}}class qi extends fn{constructor(e,t,n,i){super(n),this.children=e,this.childOffsets=t,this.optional=i}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}D.prototype.eval=$e("eval");xe.eval=function(r){const{inputStream:e}=r,t=e.pos,n=e.nextCodePoint();return n!==void 0?(r.pushBinding(new ft(String.fromCodePoint(n).length),t),!0):(r.processFailure(t,this),!1)};Ae.eval=function(r){const{inputStream:e}=r,t=e.pos;return e.atEnd()?(r.pushBinding(new ft(0),t),!0):(r.processFailure(t,this),!1)};Ie.prototype.eval=function(r){const{inputStream:e}=r,t=e.pos;return e.matchString(this.obj)?(r.pushBinding(new ft(this.obj.length),t),!0):(r.processFailure(t,this),!1)};Ne.prototype.eval=function(r){const{inputStream:e}=r,t=e.pos,n=this.matchCodePoint?e.nextCodePoint():e.nextCharCode();return n!==void 0&&this.from.codePointAt(0)<=n&&n<=this.to.codePointAt(0)?(r.pushBinding(new ft(String.fromCodePoint(n).length),t),!0):(r.processFailure(t,this),!1)};ke.prototype.eval=function(r){return r.eval(r.currentApplication().args[this.index])};Te.prototype.eval=function(r){r.enterLexifiedContext();const e=r.eval(this.expr);return r.exitLexifiedContext(),e};ce.prototype.eval=function(r){for(let e=0;e<this.terms.length;e++)if(r.eval(this.terms[e]))return!0;return!1};he.prototype.eval=function(r){for(let e=0;e<this.factors.length;e++){const t=this.factors[e];if(!r.eval(t))return!1}return!0};Oe.prototype.eval=function(r){const{inputStream:e}=r,t=e.pos,n=this.getArity(),i=[],l=[];for(;i.length<n;)i.push([]),l.push([]);let u=0,m=t,h;for(;u<this.maxNumMatches&&r.eval(this.expr);){if(e.pos===m)throw Mi(this,r._applicationStack);m=e.pos,u++;const _=r._bindings.splice(r._bindings.length-n,n),k=r._bindingOffsets.splice(r._bindingOffsets.length-n,n);for(h=0;h<_.length;h++)i[h].push(_[h]),l[h].push(k[h])}if(u<this.minNumMatches)return!1;let b=r.posToOffset(t),I=0;if(u>0){const _=i[n-1],k=l[n-1],L=k[k.length-1]+_[_.length-1].matchLength;b=l[0][0],I=L-b}const y=this instanceof Ze;for(h=0;h<i.length;h++)r._bindings.push(new qi(i[h],l[h],I,y)),r._bindingOffsets.push(b);return!0};Ce.prototype.eval=function(r){const{inputStream:e}=r,t=e.pos;r.pushFailuresInfo();const n=r.eval(this.expr);return r.popFailuresInfo(),n?(r.processFailure(t,this),!1):(e.pos=t,!0)};Re.prototype.eval=function(r){const{inputStream:e}=r,t=e.pos;return r.eval(this.expr)?(e.pos=t,!0):!1};te.prototype.eval=function(r){const e=r.currentApplication(),t=e?e.args:[],n=this.substituteParams(t),i=r.getCurrentPosInfo();if(i.isActive(n))return n.handleCycle(r);const l=n.toMemoKey(),u=i.memo[l];if(u&&i.shouldUseMemoizedResult(u)){if(r.hasNecessaryInfo(u))return r.useMemoizedResult(r.inputStream.pos,u);delete i.memo[l]}return n.reallyEval(r)};te.prototype.handleCycle=function(r){const e=r.getCurrentPosInfo(),{currentLeftRecursion:t}=e,n=this.toMemoKey();let i=e.memo[n];return t&&t.headApplication.toMemoKey()===n?i.updateInvolvedApplicationMemoKeys():i||(i=e.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),e.startLeftRecursion(this,i)),r.useMemoizedResult(r.inputStream.pos,i)};te.prototype.reallyEval=function(r){const{inputStream:e}=r,t=e.pos,n=r.getCurrentPosInfo(),i=r.grammar.rules[this.ruleName],{body:l}=i,{description:u}=i;r.enterApplication(n,this),u&&r.pushFailuresInfo();const m=e.examinedLength;e.examinedLength=0;let h=this.evalOnce(l,r);const b=n.currentLeftRecursion,I=this.toMemoKey(),y=b&&b.headApplication.toMemoKey()===I;let _;r.doNotMemoize?r.doNotMemoize=!1:y?(h=this.growSeedResult(l,r,t,b,h),n.endLeftRecursion(),_=b,_.examinedLength=e.examinedLength-t,_.rightmostFailureOffset=r._getRightmostFailureOffset(),n.memoize(I,_)):(!b||!b.isInvolved(I))&&(_=n.memoize(I,{matchLength:e.pos-t,examinedLength:e.examinedLength-t,value:h,failuresAtRightmostPosition:r.cloneRecordedFailures(),rightmostFailureOffset:r._getRightmostFailureOffset()}));const k=!!h;if(u&&(r.popFailuresInfo(),k||r.processFailure(t,this),_&&(_.failuresAtRightmostPosition=r.cloneRecordedFailures())),r.isTracing()&&_){const L=r.getTraceEntry(t,this,k,k?[h]:[]);y&&(rt(L.terminatingLREntry!=null||!k),L.isHeadOfLeftRecursion=!0),_.traceEntry=L}return e.examinedLength=Math.max(e.examinedLength,m),r.exitApplication(n,h),k};te.prototype.evalOnce=function(r,e){const{inputStream:t}=e,n=t.pos;if(e.eval(r)){const i=r.getArity(),l=e._bindings.splice(e._bindings.length-i,i),u=e._bindingOffsets.splice(e._bindingOffsets.length-i,i),m=t.pos-n;return new xp(this.ruleName,l,u,m)}else return!1};te.prototype.growSeedResult=function(r,e,t,n,i){if(!i)return!1;const{inputStream:l}=e;for(;;){if(n.matchLength=l.pos-t,n.value=i,n.failuresAtRightmostPosition=e.cloneRecordedFailures(),e.isTracing()){const u=e.trace[e.trace.length-1];n.traceEntry=new tt(e.input,t,l.pos,this,!0,[i],[u.clone()])}if(l.pos=t,i=this.evalOnce(r,e),l.pos-t<=n.matchLength)break;e.isTracing()&&e.trace.splice(-2,1)}return e.isTracing()&&n.traceEntry.recordLRTermination(e.trace.pop(),i),l.pos=t+n.matchLength,n.value};be.prototype.eval=function(r){const{inputStream:e}=r,t=e.pos,n=e.next();return n&&this.pattern.test(n)?(r.pushBinding(new ft(n.length),t),!0):(r.processFailure(t,this),!1)};D.prototype.getArity=$e("getArity");xe.getArity=Ae.getArity=Ie.prototype.getArity=Ne.prototype.getArity=ke.prototype.getArity=te.prototype.getArity=be.prototype.getArity=function(){return 1};ce.prototype.getArity=function(){return this.terms.length===0?0:this.terms[0].getArity()};he.prototype.getArity=function(){let r=0;for(let e=0;e<this.factors.length;e++)r+=this.factors[e].getArity();return r};Oe.prototype.getArity=function(){return this.expr.getArity()};Ce.prototype.getArity=function(){return 0};Re.prototype.getArity=Te.prototype.getArity=function(){return this.expr.getArity()};function He(r,e){const t={};if(r.source&&e){const n=r.source.relativeTo(e);t.sourceInterval=[n.startIdx,n.endIdx]}return t}D.prototype.outputRecipe=$e("outputRecipe");xe.outputRecipe=function(r,e){return["any",He(this,e)]};Ae.outputRecipe=function(r,e){return["end",He(this,e)]};Ie.prototype.outputRecipe=function(r,e){return["terminal",He(this,e),this.obj]};Ne.prototype.outputRecipe=function(r,e){return["range",He(this,e),this.from,this.to]};ke.prototype.outputRecipe=function(r,e){return["param",He(this,e),this.index]};ce.prototype.outputRecipe=function(r,e){return["alt",He(this,e)].concat(this.terms.map(t=>t.outputRecipe(r,e)))};ur.prototype.outputRecipe=function(r,e){return this.terms[0].outputRecipe(r,e)};cr.prototype.outputRecipe=function(r,e){const t=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",He(this,e),t.map(i=>i.outputRecipe(r,e)),n.map(i=>i.outputRecipe(r,e))]};he.prototype.outputRecipe=function(r,e){return["seq",He(this,e)].concat(this.factors.map(t=>t.outputRecipe(r,e)))};pt.prototype.outputRecipe=Ct.prototype.outputRecipe=Ze.prototype.outputRecipe=Ce.prototype.outputRecipe=Re.prototype.outputRecipe=Te.prototype.outputRecipe=function(r,e){return[this.constructor.name.toLowerCase(),He(this,e),this.expr.outputRecipe(r,e)]};te.prototype.outputRecipe=function(r,e){return["app",He(this,e),this.ruleName,this.args.map(t=>t.outputRecipe(r,e))]};be.prototype.outputRecipe=function(r,e){return["unicodeChar",He(this,e),this.category]};D.prototype.introduceParams=$e("introduceParams");xe.introduceParams=Ae.introduceParams=Ie.prototype.introduceParams=Ne.prototype.introduceParams=ke.prototype.introduceParams=be.prototype.introduceParams=function(r){return this};ce.prototype.introduceParams=function(r){return this.terms.forEach((e,t,n)=>{n[t]=e.introduceParams(r)}),this};he.prototype.introduceParams=function(r){return this.factors.forEach((e,t,n)=>{n[t]=e.introduceParams(r)}),this};Oe.prototype.introduceParams=Ce.prototype.introduceParams=Re.prototype.introduceParams=Te.prototype.introduceParams=function(r){return this.expr=this.expr.introduceParams(r),this};te.prototype.introduceParams=function(r){const e=r.indexOf(this.ruleName);if(e>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new ke(e).withSource(this.source)}else return this.args.forEach((t,n,i)=>{i[n]=t.introduceParams(r)}),this};D.prototype.isNullable=function(r){return this._isNullable(r,Object.create(null))};D.prototype._isNullable=$e("_isNullable");xe._isNullable=Ne.prototype._isNullable=ke.prototype._isNullable=Ct.prototype._isNullable=be.prototype._isNullable=function(r,e){return!1};Ae._isNullable=function(r,e){return!0};Ie.prototype._isNullable=function(r,e){return typeof this.obj=="string"?this.obj==="":!1};ce.prototype._isNullable=function(r,e){return this.terms.length===0||this.terms.some(t=>t._isNullable(r,e))};he.prototype._isNullable=function(r,e){return this.factors.every(t=>t._isNullable(r,e))};pt.prototype._isNullable=Ze.prototype._isNullable=Ce.prototype._isNullable=Re.prototype._isNullable=function(r,e){return!0};Te.prototype._isNullable=function(r,e){return this.expr._isNullable(r,e)};te.prototype._isNullable=function(r,e){const t=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(e,t)){const{body:n}=r.rules[this.ruleName],i=n.substituteParams(this.args);e[t]=!1,e[t]=i._isNullable(r,e)}return e[t]};D.prototype.substituteParams=$e("substituteParams");xe.substituteParams=Ae.substituteParams=Ie.prototype.substituteParams=Ne.prototype.substituteParams=be.prototype.substituteParams=function(r){return this};ke.prototype.substituteParams=function(r){return r[this.index]};ce.prototype.substituteParams=function(r){return new ce(this.terms.map(e=>e.substituteParams(r)))};he.prototype.substituteParams=function(r){return new he(this.factors.map(e=>e.substituteParams(r)))};Oe.prototype.substituteParams=Ce.prototype.substituteParams=Re.prototype.substituteParams=Te.prototype.substituteParams=function(r){return new this.constructor(this.expr.substituteParams(r))};te.prototype.substituteParams=function(r){if(this.args.length===0)return this;{const e=this.args.map(t=>t.substituteParams(r));return new te(this.ruleName,e)}};function ii(r){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(r)}function hn(r){const e=Object.create(null);r.forEach(t=>{e[t]=(e[t]||0)+1}),Object.keys(e).forEach(t=>{if(e[t]<=1)return;let n=1;r.forEach((i,l)=>{i===t&&(r[l]=i+"_"+n++)})})}D.prototype.toArgumentNameList=$e("toArgumentNameList");xe.toArgumentNameList=function(r,e){return["any"]};Ae.toArgumentNameList=function(r,e){return["end"]};Ie.prototype.toArgumentNameList=function(r,e){return typeof this.obj=="string"&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+r]};Ne.prototype.toArgumentNameList=function(r,e){let t=this.from+"_to_"+this.to;return ii(t)||(t="_"+t),ii(t)||(t="$"+r),[t]};ce.prototype.toArgumentNameList=function(r,e){const t=this.terms.map(l=>l.toArgumentNameList(r,!0)),n=[],i=t[0].length;for(let l=0;l<i;l++){const u=[];for(let h=0;h<this.terms.length;h++)u.push(t[h][l]);const m=Ci(u);n.push(m.join("_or_"))}return e||hn(n),n};he.prototype.toArgumentNameList=function(r,e){let t=[];return this.factors.forEach(n=>{const i=n.toArgumentNameList(r,!0);t=t.concat(i),r+=i.length}),e||hn(t),t};Oe.prototype.toArgumentNameList=function(r,e){const t=this.expr.toArgumentNameList(r,e).map(n=>n[n.length-1]==="s"?n+"es":n+"s");return e||hn(t),t};Ze.prototype.toArgumentNameList=function(r,e){return this.expr.toArgumentNameList(r,e).map(t=>"opt"+t[0].toUpperCase()+t.slice(1))};Ce.prototype.toArgumentNameList=function(r,e){return[]};Re.prototype.toArgumentNameList=Te.prototype.toArgumentNameList=function(r,e){return this.expr.toArgumentNameList(r,e)};te.prototype.toArgumentNameList=function(r,e){return[this.ruleName]};be.prototype.toArgumentNameList=function(r,e){return["$"+r]};ke.prototype.toArgumentNameList=function(r,e){return["param"+this.index]};D.prototype.toDisplayString=$e("toDisplayString");ce.prototype.toDisplayString=he.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"};xe.toDisplayString=Ae.toDisplayString=Oe.prototype.toDisplayString=Ce.prototype.toDisplayString=Re.prototype.toDisplayString=Te.prototype.toDisplayString=Ie.prototype.toDisplayString=Ne.prototype.toDisplayString=ke.prototype.toDisplayString=function(){return this.toString()};te.prototype.toDisplayString=function(){if(this.args.length>0){const r=this.args.map(e=>e.toDisplayString());return this.ruleName+"<"+r.join(",")+">"}else return this.ruleName};be.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};function Ap(r){return r==="description"||r==="string"||r==="code"}class Me{constructor(e,t,n){if(!Ap(n))throw new Error("invalid Failure type: "+n);this.pexpr=e,this.text=t,this.type=n,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return this.type==="description"}isStringTerminal(){return this.type==="string"}isCode(){return this.type==="code"}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return this.type==="string"?JSON.stringify(this.getText()):this.getText()}clone(){const e=new Me(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+"#"+this.type}}D.prototype.toFailure=$e("toFailure");xe.toFailure=function(r){return new Me(this,"any object","description")};Ae.toFailure=function(r){return new Me(this,"end of input","description")};Ie.prototype.toFailure=function(r){return new Me(this,this.obj,"string")};Ne.prototype.toFailure=function(r){return new Me(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")};Ce.prototype.toFailure=function(r){const e=this.expr===xe?"nothing":"not "+this.expr.toFailure(r);return new Me(this,e,"description")};Re.prototype.toFailure=function(r){return this.expr.toFailure(r)};te.prototype.toFailure=function(r){let{description:e}=r.rules[this.ruleName];return e||(e=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new Me(this,e,"description")};be.prototype.toFailure=function(r){return new Me(this,"a Unicode ["+this.category+"] character","description")};ce.prototype.toFailure=function(r){const t="("+this.terms.map(n=>n.toFailure(r)).join(" or ")+")";return new Me(this,t,"description")};he.prototype.toFailure=function(r){const t="("+this.factors.map(n=>n.toFailure(r)).join(" ")+")";return new Me(this,t,"description")};Oe.prototype.toFailure=function(r){const e="("+this.expr.toFailure(r)+this.operator+")";return new Me(this,e,"description")};D.prototype.toString=$e("toString");xe.toString=function(){return"any"};Ae.toString=function(){return"end"};Ie.prototype.toString=function(){return JSON.stringify(this.obj)};Ne.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)};ke.prototype.toString=function(){return"$"+this.index};Te.prototype.toString=function(){return"#("+this.expr.toString()+")"};ce.prototype.toString=function(){return this.terms.length===1?this.terms[0].toString():"("+this.terms.map(r=>r.toString()).join(" | ")+")"};he.prototype.toString=function(){return this.factors.length===1?this.factors[0].toString():"("+this.factors.map(r=>r.toString()).join(" ")+")"};Oe.prototype.toString=function(){return this.expr+this.operator};Ce.prototype.toString=function(){return"~"+this.expr};Re.prototype.toString=function(){return"&"+this.expr};te.prototype.toString=function(){if(this.args.length>0){const r=this.args.map(e=>e.toString());return this.ruleName+"<"+r.join(",")+">"}else return this.ruleName};be.prototype.toString=function(){return"\\p{"+this.category+"}"};class dn extends D{constructor(e){super(),this.obj=e}_getString(e){const t=e.currentApplication().args[this.obj.index];return rt(t instanceof Ie,"expected a Terminal expression"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){const{inputStream:t}=e,n=t.pos,i=this._getString(e);return t.matchString(i,!0)?(e.pushBinding(new ft(i.length),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}substituteParams(e){return new dn(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new Me(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}let Hi;ji(r=>{Hi=r.rules.applySyntactic.body});const Ur=new te("spaces");class Np{constructor(e,t,n){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new pr(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],n!==void 0&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){const n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,n)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){const e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(Ur),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==Ur?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new dp),t}processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){const n=this.currentApplication();n&&(t=t.substituteParams(n.args)),this.recordFailure(t.toFailure(this.grammar),!1)}}recordFailure(e,t){const n=e.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!e.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=t?e.clone():e}recordFailures(e,t){Object.keys(e).forEach(n=>{this.recordFailure(e[n],t)})}cloneRecordedFailures(){if(!this.recordedFailures)return;const e=Object.create(null);return Object.keys(this.recordedFailures).forEach(t=>{e[t]=this.recordedFailures[t].clone()}),e}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){const n=this.memoTable[e];if(n&&t instanceof te){const i=n.memo[t.toMemoKey()];if(i&&i.traceEntry){const l=i.traceEntry.cloneWithExpr(t);return l.isMemoized=!0,l}}return null}getTraceEntry(e,t,n,i){if(t instanceof te){const l=this.currentApplication(),u=l?l.args:[];t=t.substituteParams(u)}return this.getMemoizedTraceEntry(e,t)||new tt(this.input,e,this.inputStream.pos,t,n,i,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return this.trace&&!e.traceEntry?!1:this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures?!!e.failuresAtRightmostPosition:!0}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);const n=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),t.value?(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0):!1}eval(e){const{inputStream:t}=this,n=this._bindings.length,i=this.userData;let l;this.recordedFailures&&(l=this.recordedFailures,this.recordedFailures=Object.create(null));const u=t.pos,m=this.maybeSkipSpacesBefore(e);let h;this.trace&&(h=this.trace,this.trace=[]);const b=e.eval(this);if(this.trace){const I=this._bindings.slice(n),y=this.getTraceEntry(m,e,b,I);y.isImplicitSpaces=e===Ur,y.isRootNode=e===this.startExpr,h.push(y),this.trace=h}return b?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(I=>{this.recordedFailures[I].makeFluffy()}):(t.pos=u,this.truncateBindings(n),this.userData=i),this.recordedFailures&&this.recordFailures(l,!1),e===Hi&&this.skipSpaces(),b}getMatchResult(){this.grammar._setUpMatchState(this),this.eval(this.startExpr);let e;this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(n=>this.recordedFailures[n]));const t=this._bindings[0];return t&&(t.grammar=this.grammar),new Bi(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];const e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class kp{constructor(e){this.grammar=e,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(e,t,n){const i=this._input,l=this._memoTable;if(e<0||e>i.length||t<0||t>i.length||e>t)throw new Error("Invalid indices: "+e+" and "+t);this._input=i.slice(0,e)+n+i.slice(t),this._input!==i&&l.length>0&&(this._isMemoTableStale=!0);const u=l.slice(t);l.length=e;for(let m=0;m<n.length;m++)l.push(void 0);for(const m of u)l.push(m);for(let m=0;m<e;m++){const h=l[m];h&&h.clearObsoleteEntries(m,e)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){const n={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(!n.incremental)this._resetMemoTable();else if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw Yc(this.grammar);const i=new Np(this,e,n.positionToRecordFailures);return n.tracing?i.getTrace():i.getMatchResult()}_getStartExpr(e){const t=e||this.grammar.defaultStartRule;if(!t)throw new Error("Missing start rule argument -- the grammar has no default start rule.");const n=this.grammar.parseApplication(t);return new he([n,Ae])}}const Tt=[],en=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);class si{constructor(e,t,n){this._node=e,this.source=t,this._baseInterval=n,e.isNonterminal()&&rt(t===n),this._childWrappers=[]}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach(t=>{t._forgetMemoizedResultFor(e)})}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){const n=this._node.childAt(e),i=this._node.childOffsets[e],l=this._baseInterval.subInterval(i,n.matchLength),u=n.isNonterminal()?l:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(n,l,u)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){const t=e||[],n=t.map(u=>u._node),i=new qi(n,[],-1,!1),l=this._semantics.wrap(i,null,null);return l._childWrappers=t,l}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class Ee{constructor(e,t){const n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:si){constructor(i,l,u){super(i,l,u),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return"[semantics wrapper for "+n.grammar.name+"]"}},this.super=t,t){if(!(e.equals(this.super.grammar)||e._inheritsFrom(this.super.grammar)))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const i in this.attributes)Object.defineProperty(this.attributeKeys,i,{value:ai(i)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function t(i){return i.super!==Ee.BuiltInSemantics._getSemantics()}let n=`(function(g) {
`;if(t(this)){n+="  var semantics = "+this.super.toRecipe(!0)+"(g";const i=this.super.grammar;let l=this.grammar;for(;l!==i;)n+=".superGrammar",l=l.superGrammar;n+=`);
`,n+="  return g.extendSemantics(semantics)"}else n+="  return g.createSemantics()";return["Operation","Attribute"].forEach(i=>{const l=this[i.toLowerCase()+"s"];Object.keys(l).forEach(u=>{const{actionDict:m,formals:h,builtInDefault:b}=l[u];let I=u;h.length>0&&(I+="("+h.join(", ")+")");let y;t(this)&&this.super[i.toLowerCase()+"s"][u]?y="extend"+i:y="add"+i,n+=`
    .`+y+"("+JSON.stringify(I)+", {";const _=[];Object.keys(m).forEach(k=>{if(m[k]!==b){let L=m[k].toString().trim();L=L.replace(/^.*\(/,"function("),_.push(`
      `+JSON.stringify(k)+": "+L)}}),n+=_.join(",")+`
    })`})}),n+=`;
  })`,e||(n=`(function() {
  var grammar = this.fromRecipe(`+this.grammar.toRecipe()+`);
  var semantics = `+n+`(grammar);
  return semantics;
});
`),n}addOperationOrAttribute(e,t,n){const i=e+"s",l=oi(t,e),{name:u}=l,{formals:m}=l;this.assertNewName(u,e);const h=Lp(e,u,y),b={_default:h};Object.keys(n).forEach(_=>{b[_]=n[_]});const I=e==="operation"?new Dt(u,m,b,h):new tn(u,b,h);I.checkActionDict(this.grammar),this[i][u]=I;function y(..._){const k=this._semantics[i][u];if(arguments.length!==k.formals.length)throw new Error("Invalid number of arguments passed to "+u+" "+e+" (expected "+k.formals.length+", got "+arguments.length+")");const L=Object.create(null);for(const[E,Z]of Object.entries(_)){const ze=k.formals[E];L[ze]=Z}const S=this.args;this.args=L;const $=k.execute(this._semantics,this);return this.args=S,$}e==="operation"?(this.Wrapper.prototype[u]=y,this.Wrapper.prototype[u].toString=function(){return"["+u+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,u,{get:y,configurable:!0}),Object.defineProperty(this.attributeKeys,u,{value:ai(u)}))}extendOperationOrAttribute(e,t,n){const i=e+"s";if(oi(t,"attribute"),!(this.super&&t in this.super[i]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(en(this[i],t))throw new Error("Cannot extend "+e+" '"+t+"' again");const l=this[i][t].formals,u=this[i][t].actionDict,m=Object.create(u);Object.keys(n).forEach(h=>{m[h]=n[h]}),this[i][t]=e==="operation"?new Dt(t,l,m):new tn(t,m),this[i][t].checkActionDict(this.grammar)}assertNewName(e,t){if(en(si.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")}wrap(e,t,n){const i=n||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,i)}}function oi(r,e){if(!Ee.prototypeGrammar)return rt(r.indexOf("(")===-1),{name:r,formals:[]};const t=Ee.prototypeGrammar.match(r,e==="operation"?"OperationSignature":"AttributeSignature");if(t.failed())throw new Error(t.message);return Ee.prototypeGrammarSemantics(t).parse()}function Lp(r,e,t){return function(...n){const l=(this._semantics.operations[e]||this._semantics.attributes[e]).formals.map(u=>this.args[u]);if(!this.isIteration()&&n.length===1)return t.apply(n[0],l);throw lp(this.ctorName,e,r,Tt)}}Ee.createSemantics=function(r,e){const t=new Ee(r,e!==void 0?e:Ee.BuiltInSemantics._getSemantics()),n=function(l){if(!(l instanceof Bi))throw new TypeError("Semantics expected a MatchResult, but got "+un(l));if(l.failed())throw new TypeError("cannot apply Semantics to "+l.toString());const u=l._cst;if(u.grammar!==r)throw new Error("Cannot use a MatchResult from grammar '"+u.grammar.name+"' with a semantics for '"+r.name+"'");const m=new pr(l.input);return t.wrap(u,m.interval(l._cstOffset,l.input.length))};return n.addOperation=function(i,l){return t.addOperationOrAttribute("operation",i,l),n},n.extendOperation=function(i,l){return t.extendOperationOrAttribute("operation",i,l),n},n.addAttribute=function(i,l){return t.addOperationOrAttribute("attribute",i,l),n},n.extendAttribute=function(i,l){return t.extendOperationOrAttribute("attribute",i,l),n},n._getActionDict=function(i){const l=t.operations[i]||t.attributes[i];if(!l)throw new Error('"'+i+'" is not a valid operation or attribute name in this semantics for "'+r.name+'"');return l.actionDict},n._remove=function(i){let l;return i in t.operations?(l=t.operations[i],delete t.operations[i]):i in t.attributes&&(l=t.attributes[i],delete t.attributes[i]),delete t.Wrapper.prototype[i],l},n.getOperationNames=function(){return Object.keys(t.operations)},n.getAttributeNames=function(){return Object.keys(t.attributes)},n.getGrammar=function(){return t.grammar},n.toRecipe=function(i){return t.toRecipe(i)},n.toString=t.toString.bind(t),n._getSemantics=function(){return t},n};class Dt{constructor(e,t,n,i){this.name=e,this.formals=t,this.actionDict=n,this.builtInDefault=i}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{const{ctorName:n}=t._node;let i=this.actionDict[n];return i?(Tt.push([this,n]),i.apply(t,t._children())):t.isNonterminal()&&(i=this.actionDict._nonterminal,i)?(Tt.push([this,"_nonterminal",n]),i.apply(t,t._children())):(Tt.push([this,"default action",n]),this.actionDict._default.apply(t,t._children()))}finally{Tt.pop()}}}Dt.prototype.typeName="operation";class tn extends Dt{constructor(e,t,n){super(e,[],t,n)}execute(e,t){const n=t._node,i=e.attributeKeys[this.name];return en(n,i)||(n[i]=Dt.prototype.execute.call(this,e,t)),n[i]}}tn.prototype.typeName="attribute";const li=["_iter","_terminal","_nonterminal","_default"];function ui(r){return Object.keys(r.rules).sort().map(e=>r.rules[e])}const $p=r=>r.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");let zi,Ui;class Le{constructor(e,t,n,i){if(this.name=e,this.superGrammar=t,this.rules=n,i){if(!(i in n))throw new Error("Invalid start rule: '"+i+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=i}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new kp(this)}isBuiltIn(){return this===Le.ProtoBuiltInRules||this===Le.BuiltInRules}equals(e){if(this===e)return!0;if(e==null||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||!(this.superGrammar===e.superGrammar||this.superGrammar.equals(e.superGrammar)))return!1;const t=ui(this),n=ui(e);return t.length===n.length&&t.every((i,l)=>i.description===n[l].description&&i.formals.join(",")===n[l].formals.join(",")&&i.body.toString()===n[l].body.toString())}match(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.match(t)}trace(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.trace(t)}createSemantics(){return Ee.createSemantics(this)}extendSemantics(e){return Ee.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,n){const i=[];for(const l in n){const u=n[l];if(!li.includes(l)&&!(l in this.rules)){i.push(`'${l}' is not a valid semantic action for '${this.name}'`);continue}if(typeof u!="function"){i.push(`'${l}' must be a function in an action dictionary for '${this.name}'`);continue}const h=u.length,b=this._topDownActionArity(l);if(h!==b){let I;l==="_iter"||l==="_nonterminal"?I=`it should use a rest parameter, e.g. \`${l}(...children) {}\`. NOTE: this is new in Ohm v16 — see https://ohmjs.org/d/ati for details.`:I=`expected ${b}, got ${h}`,i.push(`Semantic action '${l}' has the wrong arity: ${I}`)}}if(i.length>0){const l=i.map(m=>"- "+m),u=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...l].join(`
`));throw u.problems=i,u}}_topDownActionArity(e){return li.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e=void 0){const t={};this.source&&(t.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);const i={};Object.keys(this.rules).forEach(m=>{const h=this.rules[m],{body:b}=h,I=!this.superGrammar||!this.superGrammar.rules[m];let y;I?y="define":y=b instanceof ur?"extend":"override";const _={};if(h.source&&this.source){const S=h.source.relativeTo(this.source);_.sourceInterval=[S.startIdx,S.endIdx]}const k=I?h.description:null,L=b.outputRecipe(h.formals,this.source);i[m]=[y,_,k,h.formals,L]});let l="null";e?l=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(l=this.superGrammar.toRecipe());const u=[...["grammar",t,this.name].map(JSON.stringify),l,...[n,i].map(JSON.stringify)];return $p(`[${u.join(",")}]`)}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){const e=new ct;e.append("{");let t=!0;for(const n in this.rules){const{body:i}=this.rules[n];t?t=!1:e.append(","),e.append(`
`),e.append("  "),this.addSemanticActionTemplate(n,i,e)}return e.append(`
}`),e.contents()}addSemanticActionTemplate(e,t,n){n.append(e),n.append(": function(");const i=this._topDownActionArity(e);n.append(lr("_",i).join(", ")),n.append(`) {
`),n.append("  }")}parseApplication(e){let t;if(e.indexOf("<")===-1)t=new te(e);else{const i=zi.match(e,"Base_application");t=Ui(i,{})}if(!(t.ruleName in this.rules))throw Ei(t.ruleName,this.name);const{formals:n}=this.rules[t.ruleName];if(n.length!==t.args.length){const{source:i}=this.rules[t.ruleName];throw Ti(t.ruleName,n.length,t.args.length,i)}return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}}Le.ProtoBuiltInRules=new Le("ProtoBuiltInRules",void 0,{any:{body:xe,formals:[],description:"any character",primitive:!0},end:{body:Ae,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new dn(new ke(0)),formals:["str"],primitive:!0},lower:{body:new be("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new be("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new be("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new pt(new te("space")),formals:[]},space:{body:new Ne("\0"," "),formals:[],description:"a space"}});Le.initApplicationParser=function(r,e){zi=r,Ui=e};class ci{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar(this.name==="BuiltInRules"?Le.ProtoBuiltInRules:Le.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){const n=this.ensureSuperGrammar().rules[e];if(!n)throw Jc(e,this.superGrammar.name,t);return n}installOverriddenOrExtendedRule(e,t,n,i){const l=Yr(t);if(l.length>0)throw ti(e,l,i);const u=this.ensureSuperGrammar().rules[e],m=u.formals,h=m?m.length:0;if(t.length!==h)throw Ti(e,h,t.length,i);return this.install(e,t,n,u.description,i)}install(e,t,n,i,l,u=!1){return this.rules[e]={body:n.introduceParams(t),formals:t,description:i,source:l,primitive:u},this}withSuperGrammar(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new pr(e).interval(0,e.length),this}build(){const e=new Le(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);e._matchStateInitializer=e.superGrammar._matchStateInitializer,e.supportsIncrementalParsing=e.superGrammar.supportsIncrementalParsing;const t=[];let n=!1;return Object.keys(e.rules).forEach(i=>{const{body:l}=e.rules[i];try{l.assertChoicesHaveUniformArity(i)}catch(u){t.push(u)}try{l.assertAllApplicationsAreValid(i,e)}catch(u){t.push(u),n=!0}}),n||Object.keys(e.rules).forEach(i=>{const{body:l}=e.rules[i];try{l.assertIteratedExprsAreNotNullable(e,[])}catch(u){t.push(u)}}),t.length>0&&up(t),this.source&&(e.source=this.source),e}define(e,t,n,i,l,u){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw ei(e,this.name,this.superGrammar.name,l);if(this.rules[e])throw ei(e,this.name,this.name,l);const m=Yr(t);if(m.length>0)throw ti(e,m,l);return this.install(e,t,n,i,l,u)}override(e,t,n,i,l){return this.ensureSuperGrammarRuleForOverriding(e,l),this.installOverriddenOrExtendedRule(e,t,n,l),this}extend(e,t,n,i,l){if(!this.ensureSuperGrammar().rules[e])throw Xc(e,this.superGrammar.name,l);const m=new ur(this.superGrammar,e,n);return m.source=n.source,this.installOverriddenOrExtendedRule(e,t,m,l),this}}class nr{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new ci(e)}grammar(e,t,n,i,l){const u=new ci(t);return n&&u.withSuperGrammar(n instanceof Le?n:this.fromRecipe(n)),i&&u.withDefaultStartRule(i),e&&e.source&&u.withSource(e.source),this.currentDecl=u,Object.keys(l).forEach(m=>{this.currentRuleName=m;const h=l[m],b=h[0],I=h[1],y=h[2],_=h[3],k=this.fromRecipe(h[4]);let L;u.source&&I&&I.sourceInterval&&(L=u.source.subInterval(I.sourceInterval[0],I.sourceInterval[1]-I.sourceInterval[0])),u[b](m,_,k,y,L)}),this.currentRuleName=this.currentDecl=null,u.build()}terminal(e){return new Ie(e)}range(e,t){return new Ne(e,t)}param(e){return new ke(e)}alt(...e){let t=[];for(let n of e)n instanceof D||(n=this.fromRecipe(n)),n instanceof ce?t=t.concat(n.terms):t.push(n);return t.length===1?t[0]:new ce(t)}seq(...e){let t=[];for(let n of e)n instanceof D||(n=this.fromRecipe(n)),n instanceof he?t=t.concat(n.factors):t.push(n);return t.length===1?t[0]:new he(t)}star(e){return e instanceof D||(e=this.fromRecipe(e)),new pt(e)}plus(e){return e instanceof D||(e=this.fromRecipe(e)),new Ct(e)}opt(e){return e instanceof D||(e=this.fromRecipe(e)),new Ze(e)}not(e){return e instanceof D||(e=this.fromRecipe(e)),new Ce(e)}lookahead(e){return e instanceof D||(e=this.fromRecipe(e)),new Re(e)}lex(e){return e instanceof D||(e=this.fromRecipe(e)),new Te(e)}app(e,t){return t&&t.length>0&&(t=t.map(function(n){return n instanceof D?n:this.fromRecipe(n)},this)),new te(e,t)}splice(e,t){return new cr(this.currentDecl.superGrammar,this.currentRuleName,e.map(n=>this.fromRecipe(n)),t.map(n=>this.fromRecipe(n)))}fromRecipe(e){const t=e[0]==="grammar"?e.slice(1):e.slice(2),n=this[e[0]](...t),i=e[1];return i&&i.sourceInterval&&this.currentDecl&&n.withSource(this.currentDecl.sourceInterval(...i.sourceInterval)),n}}function mn(r){return typeof r=="function"?r.call(new nr):(typeof r=="string"&&(r=JSON.parse(r)),new nr().fromRecipe(r))}const gn=mn(["grammar",{source:`BuiltInRules {

  alnum  (an alpha-numeric character)
    = letter
    | digit

  letter  (a letter)
    = lower
    | upper
    | unicodeLtmo

  digit  (a digit)
    = "0".."9"

  hexDigit  (a hexadecimal digit)
    = digit
    | "a".."f"
    | "A".."F"

  ListOf<elem, sep>
    = NonemptyListOf<elem, sep>
    | EmptyListOf<elem, sep>

  NonemptyListOf<elem, sep>
    = elem (sep elem)*

  EmptyListOf<elem, sep>
    = /* nothing */

  listOf<elem, sep>
    = nonemptyListOf<elem, sep>
    | emptyListOf<elem, sep>

  nonemptyListOf<elem, sep>
    = elem (sep elem)*

  emptyListOf<elem, sep>
    = /* nothing */

  // Allows a syntactic rule application within a lexical context.
  applySyntactic<app> = app
}`},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);Le.BuiltInRules=gn;fp(Le.BuiltInRules);const vn=mn(["grammar",{source:`Ohm {

  Grammars
    = Grammar*

  Grammar
    = ident SuperGrammar? "{" Rule* "}"

  SuperGrammar
    = "<:" ident

  Rule
    = ident Formals? ruleDescr? "="  RuleBody  -- define
    | ident Formals?            ":=" OverrideRuleBody  -- override
    | ident Formals?            "+=" RuleBody  -- extend

  RuleBody
    = "|"? NonemptyListOf<TopLevelTerm, "|">

  TopLevelTerm
    = Seq caseName  -- inline
    | Seq

  OverrideRuleBody
    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">

  OverrideTopLevelTerm
    = "..."  -- superSplice
    | TopLevelTerm

  Formals
    = "<" ListOf<ident, ","> ">"

  Params
    = "<" ListOf<Seq, ","> ">"

  Alt
    = NonemptyListOf<Seq, "|">

  Seq
    = Iter*

  Iter
    = Pred "*"  -- star
    | Pred "+"  -- plus
    | Pred "?"  -- opt
    | Pred

  Pred
    = "~" Lex  -- not
    | "&" Lex  -- lookahead
    | Lex

  Lex
    = "#" Base  -- lex
    | Base

  Base
    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application
    | oneCharTerminal ".." oneCharTerminal           -- range
    | terminal                                       -- terminal
    | "(" Alt ")"                                    -- paren

  ruleDescr  (a rule description)
    = "(" ruleDescrText ")"

  ruleDescrText
    = (~")" any)*

  caseName
    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")

  name  (a name)
    = nameFirst nameRest*

  nameFirst
    = "_"
    | letter

  nameRest
    = "_"
    | alnum

  ident  (an identifier)
    = name

  terminal
    = "\\"" terminalChar* "\\""

  oneCharTerminal
    = "\\"" terminalChar "\\""

  terminalChar
    = escapeChar
      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"

  escapeChar  (an escape sequence)
    = "\\\\\\\\"                                     -- backslash
    | "\\\\\\""                                     -- doubleQuote
    | "\\\\\\'"                                     -- singleQuote
    | "\\\\b"                                      -- backspace
    | "\\\\n"                                      -- lineFeed
    | "\\\\r"                                      -- carriageReturn
    | "\\\\t"                                      -- tab
    | "\\\\u{" hexDigit hexDigit? hexDigit?
             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint
    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape
    | "\\\\x" hexDigit hexDigit                    -- hexEscape

  space
   += comment

  comment
    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine
    | "/*" (~"*/" any)* "*/"  -- multiLine

  tokens = token*

  token = caseName | comment | ident | operator | punctuation | terminal | any

  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"

  punctuation = "<" | ">" | "," | "--"
}`},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},`
`]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},`
`]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},`
`],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},`
`]],["range",{sourceInterval:[1639,1660]},"\0","􏿿"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},`
`]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},`
`],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]),Vr=Object.create(D.prototype);function pi(r,e){for(const t in r)if(t===e)return!0;return!1}function Vi(r,e,t){const n=new nr;let i,l,u,m=!1;return(t||vn).createSemantics().addOperation("visit",{Grammars(I){return I.children.map(y=>y.visit())},Grammar(I,y,_,k,L){const S=I.visit();i=n.newGrammar(S),y.child(0)&&y.child(0).visit(),k.children.map(E=>E.visit());const $=i.build();if($.source=this.source.trimmed(),pi(e,S))throw Zc($);return e[S]=$,$},SuperGrammar(I,y){const _=y.visit();if(_==="null")i.withSuperGrammar(null);else{if(!e||!pi(e,_))throw Kc(_,e,y.source);i.withSuperGrammar(e[_])}},Rule_define(I,y,_,k,L){l=I.visit(),u=y.children.map(Z=>Z.visit())[0]||[],!i.defaultStartRule&&i.ensureSuperGrammar()!==Le.ProtoBuiltInRules&&i.withDefaultStartRule(l);const S=L.visit(),$=_.children.map(Z=>Z.visit())[0],E=this.source.trimmed();return i.define(l,u,S,$,E)},Rule_override(I,y,_,k){l=I.visit(),u=y.children.map($=>$.visit())[0]||[];const L=this.source.trimmed();i.ensureSuperGrammarRuleForOverriding(l,L),m=!0;const S=k.visit();return m=!1,i.override(l,u,S,null,L)},Rule_extend(I,y,_,k){l=I.visit(),u=y.children.map($=>$.visit())[0]||[];const L=k.visit(),S=this.source.trimmed();return i.extend(l,u,L,null,S)},RuleBody(I,y){return n.alt(...y.visit()).withSource(this.source)},OverrideRuleBody(I,y){const _=y.visit(),k=_.indexOf(Vr);if(k>=0){const L=_.slice(0,k),S=_.slice(k+1);return S.forEach($=>{if($===Vr)throw ip($)}),new cr(i.superGrammar,l,L,S).withSource(this.source)}else return n.alt(..._).withSource(this.source)},Formals(I,y,_){return y.visit()},Params(I,y,_){return y.visit()},Alt(I){return n.alt(...I.visit()).withSource(this.source)},TopLevelTerm_inline(I,y){const _=l+"_"+y.visit(),k=I.visit(),L=this.source.trimmed(),S=!(i.superGrammar&&i.superGrammar.rules[_]);m&&!S?i.override(_,u,k,null,L):i.define(_,u,k,null,L);const $=u.map(E=>n.app(E));return n.app(_,$).withSource(k.source)},OverrideTopLevelTerm_superSplice(I){return Vr},Seq(I){return n.seq(...I.children.map(y=>y.visit())).withSource(this.source)},Iter_star(I,y){return n.star(I.visit()).withSource(this.source)},Iter_plus(I,y){return n.plus(I.visit()).withSource(this.source)},Iter_opt(I,y){return n.opt(I.visit()).withSource(this.source)},Pred_not(I,y){return n.not(y.visit()).withSource(this.source)},Pred_lookahead(I,y){return n.lookahead(y.visit()).withSource(this.source)},Lex_lex(I,y){return n.lex(y.visit()).withSource(this.source)},Base_application(I,y){const _=y.children.map(k=>k.visit())[0]||[];return n.app(I.visit(),_).withSource(this.source)},Base_range(I,y,_){return n.range(I.visit(),_.visit()).withSource(this.source)},Base_terminal(I){return n.terminal(I.visit()).withSource(this.source)},Base_paren(I,y,_){return y.visit()},ruleDescr(I,y,_){return y.visit()},ruleDescrText(I){return this.sourceString.trim()},caseName(I,y,_,k,L){return _.visit()},name(I,y){return this.sourceString},nameFirst(I){},nameRest(I){},terminal(I,y,_){return y.children.map(k=>k.visit()).join("")},oneCharTerminal(I,y,_){return y.visit()},escapeChar(I){try{return Pi(this.sourceString)}catch(y){throw y instanceof RangeError&&y.message.startsWith("Invalid code point ")?sp(I):y}},NonemptyListOf(I,y,_){return[I.visit()].concat(_.children.map(k=>k.visit()))},EmptyListOf(){return[]},_terminal(){return this.sourceString}})(r).visit()}const Op=mn(["grammar",{source:`OperationsAndAttributes {

  AttributeSignature =
    name

  OperationSignature =
    name Formals?

  Formals
    = "(" ListOf<name, ","> ")"

  name  (a name)
    = nameFirst nameRest*

  nameFirst
    = "_"
    | letter

  nameRest
    = "_"
    | alnum

}`},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);Cp(Le.BuiltInRules);Rp(Op);function Cp(r){const e={empty(){return this.iteration()},nonEmpty(t,n,i){return this.iteration([t].concat(i.children))}};Ee.BuiltInSemantics=Ee.createSemantics(r,null).addOperation("asIteration",{emptyListOf:e.empty,nonemptyListOf:e.nonEmpty,EmptyListOf:e.empty,NonemptyListOf:e.nonEmpty})}function Rp(r){Ee.prototypeGrammarSemantics=r.createSemantics().addOperation("parse",{AttributeSignature(e){return{name:e.parse(),formals:[]}},OperationSignature(e,t){return{name:e.parse(),formals:t.children.map(n=>n.parse())[0]||[]}},Formals(e,t,n){return t.asIteration().children.map(i=>i.parse())},name(e,t){return this.sourceString}}),Ee.prototypeGrammar=r}function Fp(r){let e=0;const t=[0],n=()=>t[t.length-1],i={},l=/( *).*(?:$|\r?\n|\r)/g;let u;for(;(u=l.exec(r))!=null;){const[m,h]=u;if(m.length===0)break;const b=h.length,I=n(),y=e+b;if(b>I)t.push(b),i[y]=1;else if(b<I){const _=t.length;for(;n()!==b;)t.pop();i[y]=-1*(_-t.length)}e+=m.length}return t.length>1&&(i[e]=1-t.length),i}const Wi="an indented block",Ki="a dedent",fi=1114111+1;class Pp extends pr{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&this._indentationAt(this.pos)===0}next(){if(this._indentationAt(this.pos)!==0){this.examinedLength=Math.max(this.examinedLength,this.pos);return}return super.next()}nextCharCode(){return this._indentationAt(this.pos)!==0?(this.examinedLength=Math.max(this.examinedLength,this.pos),fi):super.nextCharCode()}nextCodePoint(){return this._indentationAt(this.pos)!==0?(this.examinedLength=Math.max(this.examinedLength,this.pos),fi):super.nextCodePoint()}}class hi extends D{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){const{inputStream:t}=e,n=e.userData;e.doNotMemoize=!0;const i=t.pos,l=this.isIndent?1:-1;return(n[i]||0)*l>0?(e.userData=Object.create(n),e.userData[i]-=l,e.pushBinding(new ft(0),i),!0):(e.processFailure(i,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(e){const t=this.isIndent?Wi:Ki;return new Me(this,t,"description")}}const Ep=new te("indent"),Tp=new te("dedent"),Mp=new cr(gn,"any",[Ep,Tp],[]),Dp=new nr().newGrammar("IndentationSensitive").withSuperGrammar(gn).define("indent",[],new hi(!0),Wi,void 0,!0).define("dedent",[],new hi(!1),Ki,void 0,!0).extend("any",[],Mp,"any character",void 0).build();Object.assign(Dp,{_matchStateInitializer(r){r.userData=Fp(r.input),r.inputStream=new Pp(r)},supportsIncrementalParsing:!1});Le.initApplicationParser(vn,Vi);const jp=r=>!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r);function Bp(r,e){const t=vn.match(r,"Grammars");if(t.failed())throw Wc(t);return Vi(t,e)}function Gp(r,e){const t=qp(r,e),n=Object.keys(t);if(n.length===0)throw new Error("Missing grammar definition");if(n.length>1){const l=t[n[1]].source;throw new Error(pn(l.sourceString,l.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return t[n[0]]}function qp(r,e){const t=Object.create(e||{});if(typeof r!="string")if(jp(r))r=r.toString();else throw new TypeError("Expected string as first argument, got "+un(r));return Bp(r,t),t}const U={VAR:"var",CON:"con",APP:"app",FUN:"fun",TUPLE:"tuple",PAREN:"paren",LIST:"list",CLASS:"class"},Zi=Gp(String.raw`
Signature {
    fullType = context spaces "=>" spaces type -- withContext
                | type
    type = tfun | tapp  | simpleType
    simpleType =
        | "forall" spaces (tvar spaces)* "." spaces simpleType -- forall
        | "(" (tfun | tapp) ")" -- paren
        | "[" type "]" -- list
        | "(" spaces type spaces ("," spaces type)+ ")" -- tuple
        | tcon
        | tvar

    tfun = type spaces "->" spaces type
    tapp = (~ "forall") (tcon|tvar) (spaces simpleType)+
    tcon = upper (alnum *)
    tvar = lower (alnum *)
    tclass = tcon spaces tvar -- single
      | "(" tcon (spaces (tvar|tcon))+ ")" -- multiple
    context = tclass
      |  "(" tclass spaces ("," spaces tclass)* ")" -- multiple
}
`),Yi=Zi.createSemantics();Yi.addOperation("parse",{tclass_single(r,e,t){return{type:U.CLASS,predicates:[{class:r.parse(),var:t.parse()}]}},context(r){return r.parse()},fullType(r){return r.parse()},fullType_withContext(r,e,t,n,i){return{...i.parse(),context:r.parse()}},context_multiple(r,e,t,n,i,l,u){const m=[e.parse(),...l.parse()];return{type:U.CLASS,predicates:m.flatMap(h=>h.predicates)}},simpleType_forall(r,e,t,n,i,l,u){return{type:"Unsupported"}},simpleType_paren(r,e,t){return{type:U.PAREN,child:e.parse(),start:r.source.startIdx,end:t.source.endIdx}},simpleType_list(r,e,t){return{type:U.LIST,child:e.parse(),start:r.source.startIdx,end:t.source.endIdx}},simpleType_tuple(r,e,t,n,i,l,u,m){return{type:U.TUPLE,children:[t.parse(),...u.parse()],start:r.source.startIdx,end:m.source.endIdx}},tfun(r,e,t,n,i){return{type:U.FUN,arg:r.parse(),result:i.parse(),start:r.source.startIdx,end:i.source.endIdx}},tvar(r,e){return{type:U.VAR,source:r.sourceString+e.sourceString,start:r.source.startIdx,end:e.source.endIdx}},tcon(r,e){return{type:U.CON,source:r.sourceString+e.sourceString,start:r.source.startIdx,end:e.source.endIdx}},_iter(...r){return r.map(e=>e.parse())},tapp(r,e,t){return{type:U.APP,children:[r.parse(),...t.parse()],start:r.source.startIdx,end:t.source.endIdx}}});const st=(r,e=new Set,t=new Set)=>{switch(r.type){case U.VAR:return{vars:new Set([...e,r.source]),cons:t};case U.CON:return{vars:e,cons:new Set([...t,r.source])};case U.PAREN:return st(r.child);case U.APP:{let u=r.children.map(b=>st(b,e,t)),m=u.map(b=>b.vars).reduce((b,I)=>new Set([...b,...I]),new Set),h=u.map(b=>b.cons).reduce((b,I)=>new Set([...b,...I]),new Set);return{vars:m,cons:h}}case U.LIST:{let u=st(r.child,e,t);return{vars:u.vars,cons:new Set([...u.cons,"List"])}}case U.FUN:{let u=st(r.arg,e,t),m=st(r.result,e,t);return{vars:new Set([...u.vars,...m.vars]),cons:new Set([...u.cons,...m.cons,"Function"])}}case U.TUPLE:let n=r.children.map(u=>st(u,e,t)),i=n.map(u=>u.vars).reduce((u,m)=>new Set([...u,...m]),new Set),l=n.map(u=>u.cons).reduce((u,m)=>new Set([...u,...m]),new Set);return{vars:i,cons:new Set([...l,"Tuple"])}}return{vars:e,cons:t}},Ji=r=>r.type===U.FUN?1+Ji(r.result):0,Hp=["rgb(239,177,177)","rgb(246,189,131)","rgb(246,246,131)","rgb(189,246,131)","rgb(131,246,131)","rgb(131,246,189)","rgb(131,246,246)","rgb(131,189,246)","rgb(131,131,246)","rgb(189,131,246)","rgb(246,131,246)","rgb(246,131,189)"],zp=["rgb(143,61,61)","rgb(143,102,61)","rgb(143,143,61)","rgb(102,143,61)","rgb(61,143,61)","rgb(61,143,102)","rgb(61,143,143)","rgb(61,102,143)","rgb(61,61,143)","rgb(102,61,143)","rgb(143,61,143)","rgb(143,61,102)"],Up=["rgb(239,177,177)","rgb(246,246,131)","rgb(189,246,131)","rgb(131,246,189)","rgb(131,189,246)","rgb(189,131,246)","rgb(246,131,189)"].reverse(),Vp={List:"#DFA378",Function:"#959595",Maybe:"#9790E8",IO:"#75DDE3",Tuple:"#70D8F9"},Wp={},rn=Ve("a b"),di=Ve(!1),Xi=Ve({}),Kp=Ve(new Set),Zp=Ve(new Set),Qi=Ve({}),es=Ve({}),ts=Ve({}),rs=Ve(0),ns=Ve(new Map);rn.subscribe(r=>{const e=Zi.match(r);if(e.succeeded()){const i=Yi(e).parse(),l=st(i),u=Object.fromEntries(Array.from(l.vars).map((h,b)=>[h,Hp[b]])),m=Object.fromEntries(Array.from(l.cons).map((h,b)=>[h,Vp[h]||zp[b]]));if(i.context){const h=i.context?i.context.predicates:[];console.log(h);const b=Object.fromEntries(Array.from(new Set(h.map(y=>y.class.source))).map((y,_)=>(console.log(y),[y,Wp[y]||Up[_]])));ts.set(b);const I=h.reduce((y,_)=>{const k=_.class.source,L=_.var.source,S=y.get(L)||[];return y.set(L,[...S,k])},new Map);ns.set(I)}di.set(!0),Xi.set(i),Kp.set(l.vars),Zp.set(l.cons),Qi.set(u),es.set(m),rs.set(Ji(i))}else di.set(!1)});var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var as={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(r,e){(function(t,n){r.exports=n()})(Yp,function(){for(var t=function(a,s,o){return s===void 0&&(s=0),o===void 0&&(o=1),a<s?s:a>o?o:a},n=t,i=function(a){a._clipped=!1,a._unclipped=a.slice(0);for(var s=0;s<=3;s++)s<3?((a[s]<0||a[s]>255)&&(a._clipped=!0),a[s]=n(a[s],0,255)):s===3&&(a[s]=n(a[s],0,1));return a},l={},u=0,m=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];u<m.length;u+=1){var h=m[u];l["[object "+h+"]"]=h.toLowerCase()}var b=function(a){return l[Object.prototype.toString.call(a)]||"object"},I=b,y=function(a,s){return s===void 0&&(s=null),a.length>=3?Array.prototype.slice.call(a):I(a[0])=="object"&&s?s.split("").filter(function(o){return a[0][o]!==void 0}).map(function(o){return a[0][o]}):a[0]},_=b,k=function(a){if(a.length<2)return null;var s=a.length-1;return _(a[s])=="string"?a[s].toLowerCase():null},L=Math.PI,S={clip_rgb:i,limit:t,type:b,unpack:y,last:k,PI:L,TWOPI:L*2,PITHIRD:L/3,DEG2RAD:L/180,RAD2DEG:180/L},$={format:{},autodetect:[]},E=S.last,Z=S.clip_rgb,ze=S.type,T=$,j=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var c=this;if(ze(s[0])==="object"&&s[0].constructor&&s[0].constructor===this.constructor)return s[0];var f=E(s),d=!1;if(!f){d=!0,T.sorted||(T.autodetect=T.autodetect.sort(function(x,O){return O.p-x.p}),T.sorted=!0);for(var p=0,g=T.autodetect;p<g.length;p+=1){var v=g[p];if(f=v.test.apply(v,s),f)break}}if(T.format[f]){var w=T.format[f].apply(null,d?s:s.slice(0,-1));c._rgb=Z(w)}else throw new Error("unknown format: "+s);c._rgb.length===3&&c._rgb.push(1)};j.prototype.toString=function(){return ze(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var P=j,de=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(de.Color,[null].concat(a)))};de.Color=P,de.version="2.4.2";var ae=de,is=S.unpack,bn=Math.max,ss=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=is(a,"rgb"),c=o[0],f=o[1],d=o[2];c=c/255,f=f/255,d=d/255;var p=1-bn(c,bn(f,d)),g=p<1?1/(1-p):0,v=(1-c-p)*g,w=(1-f-p)*g,x=(1-d-p)*g;return[v,w,x,p]},os=ss,ls=S.unpack,us=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=ls(a,"cmyk");var o=a[0],c=a[1],f=a[2],d=a[3],p=a.length>4?a[4]:1;return d===1?[0,0,0,p]:[o>=1?0:255*(1-o)*(1-d),c>=1?0:255*(1-c)*(1-d),f>=1?0:255*(1-f)*(1-d),p]},cs=us,ps=ae,yn=P,_n=$,fs=S.unpack,hs=S.type,ds=os;yn.prototype.cmyk=function(){return ds(this._rgb)},ps.cmyk=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(yn,[null].concat(a,["cmyk"])))},_n.format.cmyk=cs,_n.autodetect.push({p:2,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=fs(a,"cmyk"),hs(a)==="array"&&a.length===4)return"cmyk"}});var ms=S.unpack,gs=S.last,fr=function(a){return Math.round(a*100)/100},vs=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=ms(a,"hsla"),c=gs(a)||"lsa";return o[0]=fr(o[0]||0),o[1]=fr(o[1]*100)+"%",o[2]=fr(o[2]*100)+"%",c==="hsla"||o.length>3&&o[3]<1?(o[3]=o.length>3?o[3]:1,c="hsla"):o.length=3,c+"("+o.join(",")+")"},bs=vs,ys=S.unpack,_s=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=ys(a,"rgba");var o=a[0],c=a[1],f=a[2];o/=255,c/=255,f/=255;var d=Math.min(o,c,f),p=Math.max(o,c,f),g=(p+d)/2,v,w;return p===d?(v=0,w=Number.NaN):v=g<.5?(p-d)/(p+d):(p-d)/(2-p-d),o==p?w=(c-f)/(p-d):c==p?w=2+(f-o)/(p-d):f==p&&(w=4+(o-c)/(p-d)),w*=60,w<0&&(w+=360),a.length>3&&a[3]!==void 0?[w,v,g,a[3]]:[w,v,g]},In=_s,Is=S.unpack,ws=S.last,Ss=bs,xs=In,hr=Math.round,As=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Is(a,"rgba"),c=ws(a)||"rgb";return c.substr(0,3)=="hsl"?Ss(xs(o),c):(o[0]=hr(o[0]),o[1]=hr(o[1]),o[2]=hr(o[2]),(c==="rgba"||o.length>3&&o[3]<1)&&(o[3]=o.length>3?o[3]:1,c="rgba"),c+"("+o.slice(0,c==="rgb"?3:4).join(",")+")")},Ns=As,ks=S.unpack,dr=Math.round,Ls=function(){for(var a,s=[],o=arguments.length;o--;)s[o]=arguments[o];s=ks(s,"hsl");var c=s[0],f=s[1],d=s[2],p,g,v;if(f===0)p=g=v=d*255;else{var w=[0,0,0],x=[0,0,0],O=d<.5?d*(1+f):d+f-d*f,A=2*d-O,R=c/360;w[0]=R+1/3,w[1]=R,w[2]=R-1/3;for(var C=0;C<3;C++)w[C]<0&&(w[C]+=1),w[C]>1&&(w[C]-=1),6*w[C]<1?x[C]=A+(O-A)*6*w[C]:2*w[C]<1?x[C]=O:3*w[C]<2?x[C]=A+(O-A)*(2/3-w[C])*6:x[C]=A;a=[dr(x[0]*255),dr(x[1]*255),dr(x[2]*255)],p=a[0],g=a[1],v=a[2]}return s.length>3?[p,g,v,s[3]]:[p,g,v,1]},wn=Ls,Sn=wn,xn=$,An=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Nn=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,kn=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ln=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,$n=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,On=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Cn=Math.round,Rn=function(a){a=a.toLowerCase().trim();var s;if(xn.format.named)try{return xn.format.named(a)}catch{}if(s=a.match(An)){for(var o=s.slice(1,4),c=0;c<3;c++)o[c]=+o[c];return o[3]=1,o}if(s=a.match(Nn)){for(var f=s.slice(1,5),d=0;d<4;d++)f[d]=+f[d];return f}if(s=a.match(kn)){for(var p=s.slice(1,4),g=0;g<3;g++)p[g]=Cn(p[g]*2.55);return p[3]=1,p}if(s=a.match(Ln)){for(var v=s.slice(1,5),w=0;w<3;w++)v[w]=Cn(v[w]*2.55);return v[3]=+v[3],v}if(s=a.match($n)){var x=s.slice(1,4);x[1]*=.01,x[2]*=.01;var O=Sn(x);return O[3]=1,O}if(s=a.match(On)){var A=s.slice(1,4);A[1]*=.01,A[2]*=.01;var R=Sn(A);return R[3]=+s[4],R}};Rn.test=function(a){return An.test(a)||Nn.test(a)||kn.test(a)||Ln.test(a)||$n.test(a)||On.test(a)};var $s=Rn,Os=ae,Fn=P,Pn=$,Cs=S.type,Rs=Ns,En=$s;Fn.prototype.css=function(a){return Rs(this._rgb,a)},Os.css=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Fn,[null].concat(a,["css"])))},Pn.format.css=En,Pn.autodetect.push({p:5,test:function(a){for(var s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];if(!s.length&&Cs(a)==="string"&&En.test(a))return"css"}});var Tn=P,Fs=ae,Ps=$,Es=S.unpack;Ps.format.gl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Es(a,"rgba");return o[0]*=255,o[1]*=255,o[2]*=255,o},Fs.gl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Tn,[null].concat(a,["gl"])))},Tn.prototype.gl=function(){var a=this._rgb;return[a[0]/255,a[1]/255,a[2]/255,a[3]]};var Ts=S.unpack,Ms=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Ts(a,"rgb"),c=o[0],f=o[1],d=o[2],p=Math.min(c,f,d),g=Math.max(c,f,d),v=g-p,w=v*100/255,x=p/(255-v)*100,O;return v===0?O=Number.NaN:(c===g&&(O=(f-d)/v),f===g&&(O=2+(d-c)/v),d===g&&(O=4+(c-f)/v),O*=60,O<0&&(O+=360)),[O,w,x]},Ds=Ms,js=S.unpack,Bs=Math.floor,Gs=function(){for(var a,s,o,c,f,d,p=[],g=arguments.length;g--;)p[g]=arguments[g];p=js(p,"hcg");var v=p[0],w=p[1],x=p[2],O,A,R;x=x*255;var C=w*255;if(w===0)O=A=R=x;else{v===360&&(v=0),v>360&&(v-=360),v<0&&(v+=360),v/=60;var B=Bs(v),H=v-B,V=x*(1-w),Y=V+C*(1-H),me=V+C*H,fe=V+C;switch(B){case 0:a=[fe,me,V],O=a[0],A=a[1],R=a[2];break;case 1:s=[Y,fe,V],O=s[0],A=s[1],R=s[2];break;case 2:o=[V,fe,me],O=o[0],A=o[1],R=o[2];break;case 3:c=[V,Y,fe],O=c[0],A=c[1],R=c[2];break;case 4:f=[me,V,fe],O=f[0],A=f[1],R=f[2];break;case 5:d=[fe,V,Y],O=d[0],A=d[1],R=d[2];break}}return[O,A,R,p.length>3?p[3]:1]},qs=Gs,Hs=S.unpack,zs=S.type,Us=ae,Mn=P,Dn=$,Vs=Ds;Mn.prototype.hcg=function(){return Vs(this._rgb)},Us.hcg=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Mn,[null].concat(a,["hcg"])))},Dn.format.hcg=qs,Dn.autodetect.push({p:1,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=Hs(a,"hcg"),zs(a)==="array"&&a.length===3)return"hcg"}});var Ws=S.unpack,Ks=S.last,Bt=Math.round,Zs=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Ws(a,"rgba"),c=o[0],f=o[1],d=o[2],p=o[3],g=Ks(a)||"auto";p===void 0&&(p=1),g==="auto"&&(g=p<1?"rgba":"rgb"),c=Bt(c),f=Bt(f),d=Bt(d);var v=c<<16|f<<8|d,w="000000"+v.toString(16);w=w.substr(w.length-6);var x="0"+Bt(p*255).toString(16);switch(x=x.substr(x.length-2),g.toLowerCase()){case"rgba":return"#"+w+x;case"argb":return"#"+x+w;default:return"#"+w}},jn=Zs,Ys=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Js=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Xs=function(a){if(a.match(Ys)){(a.length===4||a.length===7)&&(a=a.substr(1)),a.length===3&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var s=parseInt(a,16),o=s>>16,c=s>>8&255,f=s&255;return[o,c,f,1]}if(a.match(Js)){(a.length===5||a.length===9)&&(a=a.substr(1)),a.length===4&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]);var d=parseInt(a,16),p=d>>24&255,g=d>>16&255,v=d>>8&255,w=Math.round((d&255)/255*100)/100;return[p,g,v,w]}throw new Error("unknown hex color: "+a)},Bn=Xs,Qs=ae,Gn=P,eo=S.type,qn=$,to=jn;Gn.prototype.hex=function(a){return to(this._rgb,a)},Qs.hex=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Gn,[null].concat(a,["hex"])))},qn.format.hex=Bn,qn.autodetect.push({p:4,test:function(a){for(var s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];if(!s.length&&eo(a)==="string"&&[3,4,5,6,7,8,9].indexOf(a.length)>=0)return"hex"}});var ro=S.unpack,Hn=S.TWOPI,no=Math.min,ao=Math.sqrt,io=Math.acos,so=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=ro(a,"rgb"),c=o[0],f=o[1],d=o[2];c/=255,f/=255,d/=255;var p,g=no(c,f,d),v=(c+f+d)/3,w=v>0?1-g/v:0;return w===0?p=NaN:(p=(c-f+(c-d))/2,p/=ao((c-f)*(c-f)+(c-d)*(f-d)),p=io(p),d>f&&(p=Hn-p),p/=Hn),[p*360,w,v]},oo=so,lo=S.unpack,mr=S.limit,dt=S.TWOPI,gr=S.PITHIRD,mt=Math.cos,uo=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=lo(a,"hsi");var o=a[0],c=a[1],f=a[2],d,p,g;return isNaN(o)&&(o=0),isNaN(c)&&(c=0),o>360&&(o-=360),o<0&&(o+=360),o/=360,o<1/3?(g=(1-c)/3,d=(1+c*mt(dt*o)/mt(gr-dt*o))/3,p=1-(g+d)):o<2/3?(o-=1/3,d=(1-c)/3,p=(1+c*mt(dt*o)/mt(gr-dt*o))/3,g=1-(d+p)):(o-=2/3,p=(1-c)/3,g=(1+c*mt(dt*o)/mt(gr-dt*o))/3,d=1-(p+g)),d=mr(f*d*3),p=mr(f*p*3),g=mr(f*g*3),[d*255,p*255,g*255,a.length>3?a[3]:1]},co=uo,po=S.unpack,fo=S.type,ho=ae,zn=P,Un=$,mo=oo;zn.prototype.hsi=function(){return mo(this._rgb)},ho.hsi=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(zn,[null].concat(a,["hsi"])))},Un.format.hsi=co,Un.autodetect.push({p:2,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=po(a,"hsi"),fo(a)==="array"&&a.length===3)return"hsi"}});var go=S.unpack,vo=S.type,bo=ae,Vn=P,Wn=$,yo=In;Vn.prototype.hsl=function(){return yo(this._rgb)},bo.hsl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Vn,[null].concat(a,["hsl"])))},Wn.format.hsl=wn,Wn.autodetect.push({p:2,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=go(a,"hsl"),vo(a)==="array"&&a.length===3)return"hsl"}});var _o=S.unpack,Io=Math.min,wo=Math.max,So=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=_o(a,"rgb");var o=a[0],c=a[1],f=a[2],d=Io(o,c,f),p=wo(o,c,f),g=p-d,v,w,x;return x=p/255,p===0?(v=Number.NaN,w=0):(w=g/p,o===p&&(v=(c-f)/g),c===p&&(v=2+(f-o)/g),f===p&&(v=4+(o-c)/g),v*=60,v<0&&(v+=360)),[v,w,x]},xo=So,Ao=S.unpack,No=Math.floor,ko=function(){for(var a,s,o,c,f,d,p=[],g=arguments.length;g--;)p[g]=arguments[g];p=Ao(p,"hsv");var v=p[0],w=p[1],x=p[2],O,A,R;if(x*=255,w===0)O=A=R=x;else{v===360&&(v=0),v>360&&(v-=360),v<0&&(v+=360),v/=60;var C=No(v),B=v-C,H=x*(1-w),V=x*(1-w*B),Y=x*(1-w*(1-B));switch(C){case 0:a=[x,Y,H],O=a[0],A=a[1],R=a[2];break;case 1:s=[V,x,H],O=s[0],A=s[1],R=s[2];break;case 2:o=[H,x,Y],O=o[0],A=o[1],R=o[2];break;case 3:c=[H,V,x],O=c[0],A=c[1],R=c[2];break;case 4:f=[Y,H,x],O=f[0],A=f[1],R=f[2];break;case 5:d=[x,H,V],O=d[0],A=d[1],R=d[2];break}}return[O,A,R,p.length>3?p[3]:1]},Lo=ko,$o=S.unpack,Oo=S.type,Co=ae,Kn=P,Zn=$,Ro=xo;Kn.prototype.hsv=function(){return Ro(this._rgb)},Co.hsv=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Kn,[null].concat(a,["hsv"])))},Zn.format.hsv=Lo,Zn.autodetect.push({p:2,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=$o(a,"hsv"),Oo(a)==="array"&&a.length===3)return"hsv"}});var Gt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},gt=Gt,Fo=S.unpack,Yn=Math.pow,Po=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Fo(a,"rgb"),c=o[0],f=o[1],d=o[2],p=Eo(c,f,d),g=p[0],v=p[1],w=p[2],x=116*v-16;return[x<0?0:x,500*(g-v),200*(v-w)]},vr=function(a){return(a/=255)<=.04045?a/12.92:Yn((a+.055)/1.055,2.4)},br=function(a){return a>gt.t3?Yn(a,1/3):a/gt.t2+gt.t0},Eo=function(a,s,o){a=vr(a),s=vr(s),o=vr(o);var c=br((.4124564*a+.3575761*s+.1804375*o)/gt.Xn),f=br((.2126729*a+.7151522*s+.072175*o)/gt.Yn),d=br((.0193339*a+.119192*s+.9503041*o)/gt.Zn);return[c,f,d]},Jn=Po,vt=Gt,To=S.unpack,Mo=Math.pow,Do=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=To(a,"lab");var o=a[0],c=a[1],f=a[2],d,p,g,v,w,x;return p=(o+16)/116,d=isNaN(c)?p:p+c/500,g=isNaN(f)?p:p-f/200,p=vt.Yn*_r(p),d=vt.Xn*_r(d),g=vt.Zn*_r(g),v=yr(3.2404542*d-1.5371385*p-.4985314*g),w=yr(-.969266*d+1.8760108*p+.041556*g),x=yr(.0556434*d-.2040259*p+1.0572252*g),[v,w,x,a.length>3?a[3]:1]},yr=function(a){return 255*(a<=.00304?12.92*a:1.055*Mo(a,1/2.4)-.055)},_r=function(a){return a>vt.t1?a*a*a:vt.t2*(a-vt.t0)},Xn=Do,jo=S.unpack,Bo=S.type,Go=ae,Qn=P,ea=$,qo=Jn;Qn.prototype.lab=function(){return qo(this._rgb)},Go.lab=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(Qn,[null].concat(a,["lab"])))},ea.format.lab=Xn,ea.autodetect.push({p:2,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=jo(a,"lab"),Bo(a)==="array"&&a.length===3)return"lab"}});var Ho=S.unpack,zo=S.RAD2DEG,Uo=Math.sqrt,Vo=Math.atan2,Wo=Math.round,Ko=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Ho(a,"lab"),c=o[0],f=o[1],d=o[2],p=Uo(f*f+d*d),g=(Vo(d,f)*zo+360)%360;return Wo(p*1e4)===0&&(g=Number.NaN),[c,p,g]},ta=Ko,Zo=S.unpack,Yo=Jn,Jo=ta,Xo=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Zo(a,"rgb"),c=o[0],f=o[1],d=o[2],p=Yo(c,f,d),g=p[0],v=p[1],w=p[2];return Jo(g,v,w)},Qo=Xo,el=S.unpack,tl=S.DEG2RAD,rl=Math.sin,nl=Math.cos,al=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=el(a,"lch"),c=o[0],f=o[1],d=o[2];return isNaN(d)&&(d=0),d=d*tl,[c,nl(d)*f,rl(d)*f]},ra=al,il=S.unpack,sl=ra,ol=Xn,ll=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=il(a,"lch");var o=a[0],c=a[1],f=a[2],d=sl(o,c,f),p=d[0],g=d[1],v=d[2],w=ol(p,g,v),x=w[0],O=w[1],A=w[2];return[x,O,A,a.length>3?a[3]:1]},na=ll,ul=S.unpack,cl=na,pl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=ul(a,"hcl").reverse();return cl.apply(void 0,o)},fl=pl,hl=S.unpack,dl=S.type,aa=ae,qt=P,Ir=$,ia=Qo;qt.prototype.lch=function(){return ia(this._rgb)},qt.prototype.hcl=function(){return ia(this._rgb).reverse()},aa.lch=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(qt,[null].concat(a,["lch"])))},aa.hcl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(qt,[null].concat(a,["hcl"])))},Ir.format.lch=na,Ir.format.hcl=fl,["lch","hcl"].forEach(function(a){return Ir.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=hl(s,a),dl(s)==="array"&&s.length===3)return a}})});var ml={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},sa=ml,gl=P,oa=$,vl=S.type,Rt=sa,bl=Bn,yl=jn;gl.prototype.name=function(){for(var a=yl(this._rgb,"rgb"),s=0,o=Object.keys(Rt);s<o.length;s+=1){var c=o[s];if(Rt[c]===a)return c.toLowerCase()}return a},oa.format.named=function(a){if(a=a.toLowerCase(),Rt[a])return bl(Rt[a]);throw new Error("unknown color name: "+a)},oa.autodetect.push({p:5,test:function(a){for(var s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];if(!s.length&&vl(a)==="string"&&Rt[a.toLowerCase()])return"named"}});var _l=S.unpack,Il=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=_l(a,"rgb"),c=o[0],f=o[1],d=o[2];return(c<<16)+(f<<8)+d},wl=Il,Sl=S.type,xl=function(a){if(Sl(a)=="number"&&a>=0&&a<=16777215){var s=a>>16,o=a>>8&255,c=a&255;return[s,o,c,1]}throw new Error("unknown num color: "+a)},Al=xl,Nl=ae,la=P,ua=$,kl=S.type,Ll=wl;la.prototype.num=function(){return Ll(this._rgb)},Nl.num=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(la,[null].concat(a,["num"])))},ua.format.num=Al,ua.autodetect.push({p:5,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a.length===1&&kl(a[0])==="number"&&a[0]>=0&&a[0]<=16777215)return"num"}});var $l=ae,wr=P,ca=$,pa=S.unpack,fa=S.type,ha=Math.round;wr.prototype.rgb=function(a){return a===void 0&&(a=!0),a===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ha)},wr.prototype.rgba=function(a){return a===void 0&&(a=!0),this._rgb.slice(0,4).map(function(s,o){return o<3?a===!1?s:ha(s):s})},$l.rgb=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(wr,[null].concat(a,["rgb"])))},ca.format.rgb=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=pa(a,"rgba");return o[3]===void 0&&(o[3]=1),o},ca.autodetect.push({p:3,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=pa(a,"rgba"),fa(a)==="array"&&(a.length===3||a.length===4&&fa(a[3])=="number"&&a[3]>=0&&a[3]<=1))return"rgb"}});var Ht=Math.log,Ol=function(a){var s=a/100,o,c,f;return s<66?(o=255,c=s<6?0:-155.25485562709179-.44596950469579133*(c=s-2)+104.49216199393888*Ht(c),f=s<20?0:-254.76935184120902+.8274096064007395*(f=s-10)+115.67994401066147*Ht(f)):(o=351.97690566805693+.114206453784165*(o=s-55)-40.25366309332127*Ht(o),c=325.4494125711974+.07943456536662342*(c=s-50)-28.0852963507957*Ht(c),f=255),[o,c,f,1]},da=Ol,Cl=da,Rl=S.unpack,Fl=Math.round,Pl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];for(var o=Rl(a,"rgb"),c=o[0],f=o[2],d=1e3,p=4e4,g=.4,v;p-d>g;){v=(p+d)*.5;var w=Cl(v);w[2]/w[0]>=f/c?p=v:d=v}return Fl(v)},El=Pl,Sr=ae,zt=P,xr=$,Tl=El;zt.prototype.temp=zt.prototype.kelvin=zt.prototype.temperature=function(){return Tl(this._rgb)},Sr.temp=Sr.kelvin=Sr.temperature=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(zt,[null].concat(a,["temp"])))},xr.format.temp=xr.format.kelvin=xr.format.temperature=da;var Ml=S.unpack,Ar=Math.cbrt,Dl=Math.pow,jl=Math.sign,Bl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Ml(a,"rgb"),c=o[0],f=o[1],d=o[2],p=[Nr(c/255),Nr(f/255),Nr(d/255)],g=p[0],v=p[1],w=p[2],x=Ar(.4122214708*g+.5363325363*v+.0514459929*w),O=Ar(.2119034982*g+.6806995451*v+.1073969566*w),A=Ar(.0883024619*g+.2817188376*v+.6299787005*w);return[.2104542553*x+.793617785*O-.0040720468*A,1.9779984951*x-2.428592205*O+.4505937099*A,.0259040371*x+.7827717662*O-.808675766*A]},ma=Bl;function Nr(a){var s=Math.abs(a);return s<.04045?a/12.92:(jl(a)||1)*Dl((s+.055)/1.055,2.4)}var Gl=S.unpack,Ut=Math.pow,ql=Math.sign,Hl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=Gl(a,"lab");var o=a[0],c=a[1],f=a[2],d=Ut(o+.3963377774*c+.2158037573*f,3),p=Ut(o-.1055613458*c-.0638541728*f,3),g=Ut(o-.0894841775*c-1.291485548*f,3);return[255*kr(4.0767416621*d-3.3077115913*p+.2309699292*g),255*kr(-1.2684380046*d+2.6097574011*p-.3413193965*g),255*kr(-.0041960863*d-.7034186147*p+1.707614701*g),a.length>3?a[3]:1]},ga=Hl;function kr(a){var s=Math.abs(a);return s>.0031308?(ql(a)||1)*(1.055*Ut(s,1/2.4)-.055):a*12.92}var zl=S.unpack,Ul=S.type,Vl=ae,va=P,ba=$,Wl=ma;va.prototype.oklab=function(){return Wl(this._rgb)},Vl.oklab=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(va,[null].concat(a,["oklab"])))},ba.format.oklab=ga,ba.autodetect.push({p:3,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=zl(a,"oklab"),Ul(a)==="array"&&a.length===3)return"oklab"}});var Kl=S.unpack,Zl=ma,Yl=ta,Jl=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];var o=Kl(a,"rgb"),c=o[0],f=o[1],d=o[2],p=Zl(c,f,d),g=p[0],v=p[1],w=p[2];return Yl(g,v,w)},Xl=Jl,Ql=S.unpack,eu=ra,tu=ga,ru=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];a=Ql(a,"lch");var o=a[0],c=a[1],f=a[2],d=eu(o,c,f),p=d[0],g=d[1],v=d[2],w=tu(p,g,v),x=w[0],O=w[1],A=w[2];return[x,O,A,a.length>3?a[3]:1]},nu=ru,au=S.unpack,iu=S.type,su=ae,ya=P,_a=$,ou=Xl;ya.prototype.oklch=function(){return ou(this._rgb)},su.oklch=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return new(Function.prototype.bind.apply(ya,[null].concat(a,["oklch"])))},_a.format.oklch=nu,_a.autodetect.push({p:3,test:function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];if(a=au(a,"oklch"),iu(a)==="array"&&a.length===3)return"oklch"}});var Ia=P,lu=S.type;Ia.prototype.alpha=function(a,s){return s===void 0&&(s=!1),a!==void 0&&lu(a)==="number"?s?(this._rgb[3]=a,this):new Ia([this._rgb[0],this._rgb[1],this._rgb[2],a],"rgb"):this._rgb[3]};var uu=P;uu.prototype.clipped=function(){return this._rgb._clipped||!1};var nt=P,cu=Gt;nt.prototype.darken=function(a){a===void 0&&(a=1);var s=this,o=s.lab();return o[0]-=cu.Kn*a,new nt(o,"lab").alpha(s.alpha(),!0)},nt.prototype.brighten=function(a){return a===void 0&&(a=1),this.darken(-a)},nt.prototype.darker=nt.prototype.darken,nt.prototype.brighter=nt.prototype.brighten;var pu=P;pu.prototype.get=function(a){var s=a.split("."),o=s[0],c=s[1],f=this[o]();if(c){var d=o.indexOf(c)-(o.substr(0,2)==="ok"?2:0);if(d>-1)return f[d];throw new Error("unknown channel "+c+" in mode "+o)}else return f};var bt=P,fu=S.type,hu=Math.pow,du=1e-7,mu=20;bt.prototype.luminance=function(a){if(a!==void 0&&fu(a)==="number"){if(a===0)return new bt([0,0,0,this._rgb[3]],"rgb");if(a===1)return new bt([255,255,255,this._rgb[3]],"rgb");var s=this.luminance(),o="rgb",c=mu,f=function(p,g){var v=p.interpolate(g,.5,o),w=v.luminance();return Math.abs(a-w)<du||!c--?v:w>a?f(p,v):f(v,g)},d=(s>a?f(new bt([0,0,0]),this):f(this,new bt([255,255,255]))).rgb();return new bt(d.concat([this._rgb[3]]))}return gu.apply(void 0,this._rgb.slice(0,3))};var gu=function(a,s,o){return a=Lr(a),s=Lr(s),o=Lr(o),.2126*a+.7152*s+.0722*o},Lr=function(a){return a/=255,a<=.03928?a/12.92:hu((a+.055)/1.055,2.4)},De={},wa=P,Sa=S.type,Vt=De,xa=function(a,s,o){o===void 0&&(o=.5);for(var c=[],f=arguments.length-3;f-- >0;)c[f]=arguments[f+3];var d=c[0]||"lrgb";if(!Vt[d]&&!c.length&&(d=Object.keys(Vt)[0]),!Vt[d])throw new Error("interpolation mode "+d+" is not defined");return Sa(a)!=="object"&&(a=new wa(a)),Sa(s)!=="object"&&(s=new wa(s)),Vt[d](a,s,o).alpha(a.alpha()+o*(s.alpha()-a.alpha()))},Aa=P,vu=xa;Aa.prototype.mix=Aa.prototype.interpolate=function(a,s){s===void 0&&(s=.5);for(var o=[],c=arguments.length-2;c-- >0;)o[c]=arguments[c+2];return vu.apply(void 0,[this,a,s].concat(o))};var Na=P;Na.prototype.premultiply=function(a){a===void 0&&(a=!1);var s=this._rgb,o=s[3];return a?(this._rgb=[s[0]*o,s[1]*o,s[2]*o,o],this):new Na([s[0]*o,s[1]*o,s[2]*o,o],"rgb")};var $r=P,bu=Gt;$r.prototype.saturate=function(a){a===void 0&&(a=1);var s=this,o=s.lch();return o[1]+=bu.Kn*a,o[1]<0&&(o[1]=0),new $r(o,"lch").alpha(s.alpha(),!0)},$r.prototype.desaturate=function(a){return a===void 0&&(a=1),this.saturate(-a)};var ka=P,La=S.type;ka.prototype.set=function(a,s,o){o===void 0&&(o=!1);var c=a.split("."),f=c[0],d=c[1],p=this[f]();if(d){var g=f.indexOf(d)-(f.substr(0,2)==="ok"?2:0);if(g>-1){if(La(s)=="string")switch(s.charAt(0)){case"+":p[g]+=+s;break;case"-":p[g]+=+s;break;case"*":p[g]*=+s.substr(1);break;case"/":p[g]/=+s.substr(1);break;default:p[g]=+s}else if(La(s)==="number")p[g]=s;else throw new Error("unsupported value for Color.set");var v=new ka(p,f);return o?(this._rgb=v._rgb,this):v}throw new Error("unknown channel "+d+" in mode "+f)}else return p};var yu=P,_u=function(a,s,o){var c=a._rgb,f=s._rgb;return new yu(c[0]+o*(f[0]-c[0]),c[1]+o*(f[1]-c[1]),c[2]+o*(f[2]-c[2]),"rgb")};De.rgb=_u;var Iu=P,Or=Math.sqrt,yt=Math.pow,wu=function(a,s,o){var c=a._rgb,f=c[0],d=c[1],p=c[2],g=s._rgb,v=g[0],w=g[1],x=g[2];return new Iu(Or(yt(f,2)*(1-o)+yt(v,2)*o),Or(yt(d,2)*(1-o)+yt(w,2)*o),Or(yt(p,2)*(1-o)+yt(x,2)*o),"rgb")};De.lrgb=wu;var Su=P,xu=function(a,s,o){var c=a.lab(),f=s.lab();return new Su(c[0]+o*(f[0]-c[0]),c[1]+o*(f[1]-c[1]),c[2]+o*(f[2]-c[2]),"lab")};De.lab=xu;var $a=P,_t=function(a,s,o,c){var f,d,p,g;c==="hsl"?(p=a.hsl(),g=s.hsl()):c==="hsv"?(p=a.hsv(),g=s.hsv()):c==="hcg"?(p=a.hcg(),g=s.hcg()):c==="hsi"?(p=a.hsi(),g=s.hsi()):c==="lch"||c==="hcl"?(c="hcl",p=a.hcl(),g=s.hcl()):c==="oklch"&&(p=a.oklch().reverse(),g=s.oklch().reverse());var v,w,x,O,A,R;(c.substr(0,1)==="h"||c==="oklch")&&(f=p,v=f[0],x=f[1],A=f[2],d=g,w=d[0],O=d[1],R=d[2]);var C,B,H,V;return!isNaN(v)&&!isNaN(w)?(w>v&&w-v>180?V=w-(v+360):w<v&&v-w>180?V=w+360-v:V=w-v,B=v+o*V):isNaN(v)?isNaN(w)?B=Number.NaN:(B=w,(A==1||A==0)&&c!="hsv"&&(C=O)):(B=v,(R==1||R==0)&&c!="hsv"&&(C=x)),C===void 0&&(C=x+o*(O-x)),H=A+o*(R-A),c==="oklch"?new $a([H,C,B],c):new $a([B,C,H],c)},Au=_t,Oa=function(a,s,o){return Au(a,s,o,"lch")};De.lch=Oa,De.hcl=Oa;var Nu=P,ku=function(a,s,o){var c=a.num(),f=s.num();return new Nu(c+o*(f-c),"num")};De.num=ku;var Lu=_t,$u=function(a,s,o){return Lu(a,s,o,"hcg")};De.hcg=$u;var Ou=_t,Cu=function(a,s,o){return Ou(a,s,o,"hsi")};De.hsi=Cu;var Ru=_t,Fu=function(a,s,o){return Ru(a,s,o,"hsl")};De.hsl=Fu;var Pu=_t,Eu=function(a,s,o){return Pu(a,s,o,"hsv")};De.hsv=Eu;var Tu=P,Mu=function(a,s,o){var c=a.oklab(),f=s.oklab();return new Tu(c[0]+o*(f[0]-c[0]),c[1]+o*(f[1]-c[1]),c[2]+o*(f[2]-c[2]),"oklab")};De.oklab=Mu;var Du=_t,ju=function(a,s,o){return Du(a,s,o,"oklch")};De.oklch=ju;var Cr=P,Bu=S.clip_rgb,Rr=Math.pow,Fr=Math.sqrt,Pr=Math.PI,Ca=Math.cos,Ra=Math.sin,Gu=Math.atan2,qu=function(a,s,o){s===void 0&&(s="lrgb"),o===void 0&&(o=null);var c=a.length;o||(o=Array.from(new Array(c)).map(function(){return 1}));var f=c/o.reduce(function(B,H){return B+H});if(o.forEach(function(B,H){o[H]*=f}),a=a.map(function(B){return new Cr(B)}),s==="lrgb")return Hu(a,o);for(var d=a.shift(),p=d.get(s),g=[],v=0,w=0,x=0;x<p.length;x++)if(p[x]=(p[x]||0)*o[0],g.push(isNaN(p[x])?0:o[0]),s.charAt(x)==="h"&&!isNaN(p[x])){var O=p[x]/180*Pr;v+=Ca(O)*o[0],w+=Ra(O)*o[0]}var A=d.alpha()*o[0];a.forEach(function(B,H){var V=B.get(s);A+=B.alpha()*o[H+1];for(var Y=0;Y<p.length;Y++)if(!isNaN(V[Y]))if(g[Y]+=o[H+1],s.charAt(Y)==="h"){var me=V[Y]/180*Pr;v+=Ca(me)*o[H+1],w+=Ra(me)*o[H+1]}else p[Y]+=V[Y]*o[H+1]});for(var R=0;R<p.length;R++)if(s.charAt(R)==="h"){for(var C=Gu(w/g[R],v/g[R])/Pr*180;C<0;)C+=360;for(;C>=360;)C-=360;p[R]=C}else p[R]=p[R]/g[R];return A/=c,new Cr(p,s).alpha(A>.99999?1:A,!0)},Hu=function(a,s){for(var o=a.length,c=[0,0,0,0],f=0;f<a.length;f++){var d=a[f],p=s[f]/o,g=d._rgb;c[0]+=Rr(g[0],2)*p,c[1]+=Rr(g[1],2)*p,c[2]+=Rr(g[2],2)*p,c[3]+=g[3]*p}return c[0]=Fr(c[0]),c[1]=Fr(c[1]),c[2]=Fr(c[2]),c[3]>.9999999&&(c[3]=1),new Cr(Bu(c))},Be=ae,It=S.type,zu=Math.pow,Er=function(a){var s="rgb",o=Be("#ccc"),c=0,f=[0,1],d=[],p=[0,0],g=!1,v=[],w=!1,x=0,O=1,A=!1,R={},C=!0,B=1,H=function(N){if(N=N||["#fff","#000"],N&&It(N)==="string"&&Be.brewer&&Be.brewer[N.toLowerCase()]&&(N=Be.brewer[N.toLowerCase()]),It(N)==="array"){N.length===1&&(N=[N[0],N[0]]),N=N.slice(0);for(var F=0;F<N.length;F++)N[F]=Be(N[F]);d.length=0;for(var q=0;q<N.length;q++)d.push(q/(N.length-1))}return Fe(),v=N},V=function(N){if(g!=null){for(var F=g.length-1,q=0;q<F&&N>=g[q];)q++;return q-1}return 0},Y=function(N){return N},me=function(N){return N},fe=function(N,F){var q,G;if(F==null&&(F=!1),isNaN(N)||N===null)return o;if(F)G=N;else if(g&&g.length>2){var ge=V(N);G=ge/(g.length-2)}else O!==x?G=(N-x)/(O-x):G=1;G=me(G),F||(G=Y(G)),B!==1&&(G=zu(G,B)),G=p[0]+G*(1-p[0]-p[1]),G=Math.min(1,Math.max(0,G));var ne=Math.floor(G*1e4);if(C&&R[ne])q=R[ne];else{if(It(v)==="array")for(var W=0;W<d.length;W++){var X=d[W];if(G<=X){q=v[W];break}if(G>=X&&W===d.length-1){q=v[W];break}if(G>X&&G<d[W+1]){G=(G-X)/(d[W+1]-X),q=Be.interpolate(v[W],v[W+1],G,s);break}}else It(v)==="function"&&(q=v(G));C&&(R[ne]=q)}return q},Fe=function(){return R={}};H(a);var z=function(N){var F=Be(fe(N));return w&&F[w]?F[w]():F};return z.classes=function(N){if(N!=null){if(It(N)==="array")g=N,f=[N[0],N[N.length-1]];else{var F=Be.analyze(f);N===0?g=[F.min,F.max]:g=Be.limits(F,"e",N)}return z}return g},z.domain=function(N){if(!arguments.length)return f;x=N[0],O=N[N.length-1],d=[];var F=v.length;if(N.length===F&&x!==O)for(var q=0,G=Array.from(N);q<G.length;q+=1){var ge=G[q];d.push((ge-x)/(O-x))}else{for(var ne=0;ne<F;ne++)d.push(ne/(F-1));if(N.length>2){var W=N.map(function(Q,ee){return ee/(N.length-1)}),X=N.map(function(Q){return(Q-x)/(O-x)});X.every(function(Q,ee){return W[ee]===Q})||(me=function(Q){if(Q<=0||Q>=1)return Q;for(var ee=0;Q>=X[ee+1];)ee++;var qe=(Q-X[ee])/(X[ee+1]-X[ee]),Qe=W[ee]+qe*(W[ee+1]-W[ee]);return Qe})}}return f=[x,O],z},z.mode=function(N){return arguments.length?(s=N,Fe(),z):s},z.range=function(N,F){return H(N),z},z.out=function(N){return w=N,z},z.spread=function(N){return arguments.length?(c=N,z):c},z.correctLightness=function(N){return N==null&&(N=!0),A=N,Fe(),A?Y=function(F){for(var q=fe(0,!0).lab()[0],G=fe(1,!0).lab()[0],ge=q>G,ne=fe(F,!0).lab()[0],W=q+(G-q)*F,X=ne-W,Q=0,ee=1,qe=20;Math.abs(X)>.01&&qe-- >0;)(function(){return ge&&(X*=-1),X<0?(Q=F,F+=(ee-F)*.5):(ee=F,F+=(Q-F)*.5),ne=fe(F,!0).lab()[0],X=ne-W})();return F}:Y=function(F){return F},z},z.padding=function(N){return N!=null?(It(N)==="number"&&(N=[N,N]),p=N,z):p},z.colors=function(N,F){arguments.length<2&&(F="hex");var q=[];if(arguments.length===0)q=v.slice(0);else if(N===1)q=[z(.5)];else if(N>1){var G=f[0],ge=f[1]-G;q=Uu(0,N,!1).map(function(ee){return z(G+ee/(N-1)*ge)})}else{a=[];var ne=[];if(g&&g.length>2)for(var W=1,X=g.length,Q=1<=X;Q?W<X:W>X;Q?W++:W--)ne.push((g[W-1]+g[W])*.5);else ne=f;q=ne.map(function(ee){return z(ee)})}return Be[F]&&(q=q.map(function(ee){return ee[F]()})),q},z.cache=function(N){return N!=null?(C=N,z):C},z.gamma=function(N){return N!=null?(B=N,z):B},z.nodata=function(N){return N!=null?(o=Be(N),z):o},z};function Uu(a,s,o){for(var c=[],f=a<s,d=o?f?s+1:s-1:s,p=a;f?p<d:p>d;f?p++:p--)c.push(p);return c}var Ft=P,Vu=Er,Wu=function(a){for(var s=[1,1],o=1;o<a;o++){for(var c=[1],f=1;f<=s.length;f++)c[f]=(s[f]||0)+s[f-1];s=c}return s},Ku=function(a){var s,o,c,f,d,p,g;if(a=a.map(function(A){return new Ft(A)}),a.length===2)s=a.map(function(A){return A.lab()}),d=s[0],p=s[1],f=function(A){var R=[0,1,2].map(function(C){return d[C]+A*(p[C]-d[C])});return new Ft(R,"lab")};else if(a.length===3)o=a.map(function(A){return A.lab()}),d=o[0],p=o[1],g=o[2],f=function(A){var R=[0,1,2].map(function(C){return(1-A)*(1-A)*d[C]+2*(1-A)*A*p[C]+A*A*g[C]});return new Ft(R,"lab")};else if(a.length===4){var v;c=a.map(function(A){return A.lab()}),d=c[0],p=c[1],g=c[2],v=c[3],f=function(A){var R=[0,1,2].map(function(C){return(1-A)*(1-A)*(1-A)*d[C]+3*(1-A)*(1-A)*A*p[C]+3*(1-A)*A*A*g[C]+A*A*A*v[C]});return new Ft(R,"lab")}}else if(a.length>=5){var w,x,O;w=a.map(function(A){return A.lab()}),O=a.length-1,x=Wu(O),f=function(A){var R=1-A,C=[0,1,2].map(function(B){return w.reduce(function(H,V,Y){return H+x[Y]*Math.pow(R,O-Y)*Math.pow(A,Y)*V[B]},0)});return new Ft(C,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return f},Zu=function(a){var s=Ku(a);return s.scale=function(){return Vu(s)},s},Tr=ae,Ge=function(a,s,o){if(!Ge[o])throw new Error("unknown blend mode "+o);return Ge[o](a,s)},Je=function(a){return function(s,o){var c=Tr(o).rgb(),f=Tr(s).rgb();return Tr.rgb(a(c,f))}},Xe=function(a){return function(s,o){var c=[];return c[0]=a(s[0],o[0]),c[1]=a(s[1],o[1]),c[2]=a(s[2],o[2]),c}},Yu=function(a){return a},Ju=function(a,s){return a*s/255},Xu=function(a,s){return a>s?s:a},Qu=function(a,s){return a>s?a:s},ec=function(a,s){return 255*(1-(1-a/255)*(1-s/255))},tc=function(a,s){return s<128?2*a*s/255:255*(1-2*(1-a/255)*(1-s/255))},rc=function(a,s){return 255*(1-(1-s/255)/(a/255))},nc=function(a,s){return a===255?255:(a=255*(s/255)/(1-a/255),a>255?255:a)};Ge.normal=Je(Xe(Yu)),Ge.multiply=Je(Xe(Ju)),Ge.screen=Je(Xe(ec)),Ge.overlay=Je(Xe(tc)),Ge.darken=Je(Xe(Xu)),Ge.lighten=Je(Xe(Qu)),Ge.dodge=Je(Xe(nc)),Ge.burn=Je(Xe(rc));for(var ac=Ge,Mr=S.type,ic=S.clip_rgb,sc=S.TWOPI,oc=Math.pow,lc=Math.sin,uc=Math.cos,Fa=ae,cc=function(a,s,o,c,f){a===void 0&&(a=300),s===void 0&&(s=-1.5),o===void 0&&(o=1),c===void 0&&(c=1),f===void 0&&(f=[0,1]);var d=0,p;Mr(f)==="array"?p=f[1]-f[0]:(p=0,f=[f,f]);var g=function(v){var w=sc*((a+120)/360+s*v),x=oc(f[0]+p*v,c),O=d!==0?o[0]+v*d:o,A=O*x*(1-x)/2,R=uc(w),C=lc(w),B=x+A*(-.14861*R+1.78277*C),H=x+A*(-.29227*R-.90649*C),V=x+A*(1.97294*R);return Fa(ic([B*255,H*255,V*255,1]))};return g.start=function(v){return v==null?a:(a=v,g)},g.rotations=function(v){return v==null?s:(s=v,g)},g.gamma=function(v){return v==null?c:(c=v,g)},g.hue=function(v){return v==null?o:(o=v,Mr(o)==="array"?(d=o[1]-o[0],d===0&&(o=o[1])):d=0,g)},g.lightness=function(v){return v==null?f:(Mr(v)==="array"?(f=v,p=v[1]-v[0]):(f=[v,v],p=0),g)},g.scale=function(){return Fa.scale(g)},g.hue(o),g},pc=P,fc="0123456789abcdef",hc=Math.floor,dc=Math.random,mc=function(){for(var a="#",s=0;s<6;s++)a+=fc.charAt(hc(dc()*16));return new pc(a,"hex")},Dr=b,Pa=Math.log,gc=Math.pow,vc=Math.floor,bc=Math.abs,Ea=function(a,s){s===void 0&&(s=null);var o={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Dr(a)==="object"&&(a=Object.values(a)),a.forEach(function(c){s&&Dr(c)==="object"&&(c=c[s]),c!=null&&!isNaN(c)&&(o.values.push(c),o.sum+=c,c<o.min&&(o.min=c),c>o.max&&(o.max=c),o.count+=1)}),o.domain=[o.min,o.max],o.limits=function(c,f){return Ta(o,c,f)},o},Ta=function(a,s,o){s===void 0&&(s="equal"),o===void 0&&(o=7),Dr(a)=="array"&&(a=Ea(a));var c=a.min,f=a.max,d=a.values.sort(function(Br,Gr){return Br-Gr});if(o===1)return[c,f];var p=[];if(s.substr(0,1)==="c"&&(p.push(c),p.push(f)),s.substr(0,1)==="e"){p.push(c);for(var g=1;g<o;g++)p.push(c+g/o*(f-c));p.push(f)}else if(s.substr(0,1)==="l"){if(c<=0)throw new Error("Logarithmic scales are only possible for values > 0");var v=Math.LOG10E*Pa(c),w=Math.LOG10E*Pa(f);p.push(c);for(var x=1;x<o;x++)p.push(gc(10,v+x/o*(w-v)));p.push(f)}else if(s.substr(0,1)==="q"){p.push(c);for(var O=1;O<o;O++){var A=(d.length-1)*O/o,R=vc(A);if(R===A)p.push(d[R]);else{var C=A-R;p.push(d[R]*(1-C)+d[R+1]*C)}}p.push(f)}else if(s.substr(0,1)==="k"){var B,H=d.length,V=new Array(H),Y=new Array(o),me=!0,fe=0,Fe=null;Fe=[],Fe.push(c);for(var z=1;z<o;z++)Fe.push(c+z/o*(f-c));for(Fe.push(f);me;){for(var N=0;N<o;N++)Y[N]=0;for(var F=0;F<H;F++)for(var q=d[F],G=Number.MAX_VALUE,ge=void 0,ne=0;ne<o;ne++){var W=bc(Fe[ne]-q);W<G&&(G=W,ge=ne),Y[ge]++,V[F]=ge}for(var X=new Array(o),Q=0;Q<o;Q++)X[Q]=null;for(var ee=0;ee<H;ee++)B=V[ee],X[B]===null?X[B]=d[ee]:X[B]+=d[ee];for(var qe=0;qe<o;qe++)X[qe]*=1/Y[qe];me=!1;for(var Qe=0;Qe<o;Qe++)if(X[Qe]!==Fe[Qe]){me=!0;break}Fe=X,fe++,fe>200&&(me=!1)}for(var et={},wt=0;wt<o;wt++)et[wt]=[];for(var St=0;St<H;St++)B=V[St],et[B].push(d[St]);for(var Ke=[],at=0;at<o;at++)Ke.push(et[at][0]),Ke.push(et[at][et[at].length-1]);Ke=Ke.sort(function(Br,Gr){return Br-Gr}),p.push(Ke[0]);for(var Pt=1;Pt<Ke.length;Pt+=2){var it=Ke[Pt];!isNaN(it)&&p.indexOf(it)===-1&&p.push(it)}}return p},Ma={analyze:Ea,limits:Ta},Da=P,yc=function(a,s){a=new Da(a),s=new Da(s);var o=a.luminance(),c=s.luminance();return o>c?(o+.05)/(c+.05):(c+.05)/(o+.05)},ja=P,We=Math.sqrt,se=Math.pow,_c=Math.min,Ic=Math.max,Ba=Math.atan2,Ga=Math.abs,Wt=Math.cos,qa=Math.sin,wc=Math.exp,Ha=Math.PI,Sc=function(a,s,o,c,f){o===void 0&&(o=1),c===void 0&&(c=1),f===void 0&&(f=1);var d=function(it){return 360*it/(2*Ha)},p=function(it){return 2*Ha*it/360};a=new ja(a),s=new ja(s);var g=Array.from(a.lab()),v=g[0],w=g[1],x=g[2],O=Array.from(s.lab()),A=O[0],R=O[1],C=O[2],B=(v+A)/2,H=We(se(w,2)+se(x,2)),V=We(se(R,2)+se(C,2)),Y=(H+V)/2,me=.5*(1-We(se(Y,7)/(se(Y,7)+se(25,7)))),fe=w*(1+me),Fe=R*(1+me),z=We(se(fe,2)+se(x,2)),N=We(se(Fe,2)+se(C,2)),F=(z+N)/2,q=d(Ba(x,fe)),G=d(Ba(C,Fe)),ge=q>=0?q:q+360,ne=G>=0?G:G+360,W=Ga(ge-ne)>180?(ge+ne+360)/2:(ge+ne)/2,X=1-.17*Wt(p(W-30))+.24*Wt(p(2*W))+.32*Wt(p(3*W+6))-.2*Wt(p(4*W-63)),Q=ne-ge;Q=Ga(Q)<=180?Q:ne<=ge?Q+360:Q-360,Q=2*We(z*N)*qa(p(Q)/2);var ee=A-v,qe=N-z,Qe=1+.015*se(B-50,2)/We(20+se(B-50,2)),et=1+.045*F,wt=1+.015*F*X,St=30*wc(-se((W-275)/25,2)),Ke=2*We(se(F,7)/(se(F,7)+se(25,7))),at=-Ke*qa(2*p(St)),Pt=We(se(ee/(o*Qe),2)+se(qe/(c*et),2)+se(Q/(f*wt),2)+at*(qe/(c*et))*(Q/(f*wt)));return Ic(0,_c(100,Pt))},za=P,xc=function(a,s,o){o===void 0&&(o="lab"),a=new za(a),s=new za(s);var c=a.get(o),f=s.get(o),d=0;for(var p in c){var g=(c[p]||0)-(f[p]||0);d+=g*g}return Math.sqrt(d)},Ac=P,Nc=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];try{return new(Function.prototype.bind.apply(Ac,[null].concat(a))),!0}catch{return!1}},Ua=ae,Va=Er,kc={cool:function(){return Va([Ua.hsl(180,1,.9),Ua.hsl(250,.7,.4)])},hot:function(){return Va(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Kt={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},jr=0,Wa=Object.keys(Kt);jr<Wa.length;jr+=1){var Ka=Wa[jr];Kt[Ka.toLowerCase()]=Kt[Ka]}var Lc=Kt,pe=ae;pe.average=qu,pe.bezier=Zu,pe.blend=ac,pe.cubehelix=cc,pe.mix=pe.interpolate=xa,pe.random=mc,pe.scale=Er,pe.analyze=Ma.analyze,pe.contrast=yc,pe.deltaE=Sc,pe.distance=xc,pe.limits=Ma.limits,pe.valid=Nc,pe.scales=kc,pe.colors=sa,pe.brewer=Lc;var $c=pe;return $c})})(as);var Xp=as.exports;const Qp=Jp(Xp);const ef=r=>({}),mi=r=>({}),tf=r=>({}),gi=r=>({});function vi(r,e,t){const n=r.slice();return n[18]=e[t],n}function bi(r){let e,t,n,i,l;return{c(){e=oe("div"),t=oe("div"),n=je(),i=oe("div"),l=je(),M(t,"class","pred svelte-tg4rmm"),le(t,"background-color",r[18]),M(i,"class","pred-bar svelte-tg4rmm"),M(e,"class","pred-wrapper svelte-tg4rmm")},m(u,m){ve(u,e,m),K(e,t),K(e,n),K(e,i),K(e,l)},p(u,m){m&2&&le(t,"background-color",u[18])},d(u){u&&ue(e)}}}function rf(r){let e,t;const n=r[15].default,i=Jt(n,r,r[14],null);return{c(){e=oe("div"),i&&i.c(),M(e,"class","args svelte-tg4rmm")},m(l,u){ve(l,e,u),i&&i.m(e,null),t=!0},p(l,u){i&&i.p&&(!t||u&16384)&&Qt(i,n,l,l[14],t?Xt(n,l[14],u,null):er(l[14]),null)},i(l){t||(J(i,l),t=!0)},o(l){re(i,l),t=!1},d(l){l&&ue(e),i&&i.d(l)}}}function nf(r){let e,t,n,i,l,u,m,h,b,I,y,_;const k=r[15].arg,L=Jt(k,r,r[14],gi),S=r[15].body,$=Jt(S,r,r[14],mi);return{c(){e=Pe("svg"),t=Pe("path"),n=Pe("path"),i=Pe("path"),l=Pe("path"),u=Pe("path"),m=Pe("path"),h=je(),b=oe("div"),L&&L.c(),I=je(),y=oe("div"),$&&$.c(),M(t,"d","M1 1H7L15.5 9H9.5L1 1Z"),M(n,"d","M1 17H7L15.5 9H9.5L1 17Z"),M(i,"d","M12.5 1H18.5L27 9H21L12.5 1Z"),M(l,"d","M12.5 17H18.5L27 9H21L12.5 17Z"),M(u,"d","M24 1H30L38.5 9H32.5L24 1Z"),M(m,"d","M24 17H30L38.5 9H32.5L24 17Z"),M(e,"width","39"),M(e,"height","18"),M(e,"viewBox","0 0 39 18"),M(e,"fill","none"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"class","svelte-tg4rmm"),M(b,"class","arg svelte-tg4rmm"),M(y,"class","body svelte-tg4rmm")},m(E,Z){ve(E,e,Z),K(e,t),K(e,n),K(e,i),K(e,l),K(e,u),K(e,m),ve(E,h,Z),ve(E,b,Z),L&&L.m(b,null),ve(E,I,Z),ve(E,y,Z),$&&$.m(y,null),_=!0},p(E,Z){L&&L.p&&(!_||Z&16384)&&Qt(L,k,E,E[14],_?Xt(k,E[14],Z,tf):er(E[14]),gi),$&&$.p&&(!_||Z&16384)&&Qt($,S,E,E[14],_?Xt(S,E[14],Z,ef):er(E[14]),mi)},i(E){_||(J(L,E),J($,E),_=!0)},o(E){re(L,E),re($,E),_=!1},d(E){E&&(ue(e),ue(h),ue(b),ue(I),ue(y)),L&&L.d(E),$&&$.d(E)}}}function af(r){let e,t,n,i,l,u,m,h,b,I;const y=r[15].default,_=Jt(y,r,r[14],null);return{c(){e=Pe("svg"),t=Pe("path"),n=Pe("path"),i=Pe("path"),l=Pe("path"),u=Pe("path"),m=Pe("path"),h=je(),b=oe("div"),_&&_.c(),M(t,"d","M1 1H7L15.5 9H9.5L1 1Z"),M(n,"d","M1 17H7L15.5 9H9.5L1 17Z"),M(i,"d","M12.5 1H18.5L27 9H21L12.5 1Z"),M(l,"d","M12.5 17H18.5L27 9H21L12.5 17Z"),M(u,"d","M24 1H30L38.5 9H32.5L24 1Z"),M(m,"d","M24 17H30L38.5 9H32.5L24 17Z"),M(e,"width","39"),M(e,"height","18"),M(e,"viewBox","0 0 39 18"),M(e,"fill","none"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"class","svelte-tg4rmm"),M(b,"class","arg svelte-tg4rmm")},m(k,L){ve(k,e,L),K(e,t),K(e,n),K(e,i),K(e,l),K(e,u),K(e,m),ve(k,h,L),ve(k,b,L),_&&_.m(b,null),I=!0},p(k,L){_&&_.p&&(!I||L&16384)&&Qt(_,y,k,k[14],I?Xt(y,k[14],L,null):er(k[14]),null)},i(k){I||(J(_,k),I=!0)},o(k){re(_,k),I=!1},d(k){k&&(ue(e),ue(h),ue(b)),_&&_.d(k)}}}function sf(r){let e,t,n,i,l=(r[3]?r[3]:"")+"",u,m,h,b,I,y,_,k,L,S=Ot(r[1]),$=[];for(let T=0;T<S.length;T+=1)$[T]=bi(vi(r,S,T));const E=[af,nf,rf],Z=[];function ze(T,j){return T[2]==="function-curried"?0:T[2]==="function"?1:2}return I=ze(r),y=Z[I]=E[I](r),{c(){e=oe("section"),t=oe("div"),n=je(),i=oe("span"),u=ir(l),m=je(),h=oe("div");for(let T=0;T<$.length;T+=1)$[T].c();b=je(),y.c(),M(t,"class","inner svelte-tg4rmm"),le(t,"width",r[11]),le(t,"height",r[10]),le(t,"background-color",r[0]),le(t,"clip-path",r[7]),M(i,"class","text svelte-tg4rmm"),le(i,"color",r[9]),M(h,"class","predicates svelte-tg4rmm"),M(e,"class",_=Ya(r[2])+" svelte-tg4rmm"),tr(()=>r[16].call(e)),le(e,"clip-path",r[6]),le(e,"margin-right",r[8])},m(T,j){ve(T,e,j),K(e,t),K(e,n),K(e,i),K(i,u),K(e,m),K(e,h);for(let P=0;P<$.length;P+=1)$[P]&&$[P].m(h,null);K(e,b),Z[I].m(e,null),k=Mc(e,r[16].bind(e)),L=!0},p(T,[j]){if(j&2048&&le(t,"width",T[11]),j&1024&&le(t,"height",T[10]),j&1&&le(t,"background-color",T[0]),j&128&&le(t,"clip-path",T[7]),(!L||j&8)&&l!==(l=(T[3]?T[3]:"")+"")&&ki(u,l),j&512&&le(i,"color",T[9]),j&2){S=Ot(T[1]);let de;for(de=0;de<S.length;de+=1){const ae=vi(T,S,de);$[de]?$[de].p(ae,j):($[de]=bi(ae),$[de].c(),$[de].m(h,null))}for(;de<$.length;de+=1)$[de].d(1);$.length=S.length}let P=I;I=ze(T),I===P?Z[I].p(T,j):(sr(),re(Z[P],1,1,()=>{Z[P]=null}),or(),y=Z[I],y?y.p(T,j):(y=Z[I]=E[I](T),y.c()),J(y,1),y.m(e,null)),(!L||j&4&&_!==(_=Ya(T[2])+" svelte-tg4rmm"))&&M(e,"class",_),j&64&&le(e,"clip-path",T[6]),j&256&&le(e,"margin-right",T[8])},i(T){L||(J(y),L=!0)},o(T){re(y),L=!1},d(T){T&&ue(e),nn($,T),Z[I].d(),k()}}}const Nt=9,kt=10,yi=2;function of(r,e,t){let n,i,{$$slots:l={},$$scope:u}=e,{color:m}=e,{predicates:h=[]}=e,{hasSibling:b}=e,{icon:I=null}=e,{variant:y="app"}=e,{text:_=null}=e;const k={outerHalf:`polygon(${kt}px 0, 100% 0, 100% 100%, 0 100%, 0 ${kt}px)`,outerFull:`polygon(${kt}px 0, 100% 0, 100% calc(100% - ${kt}px), calc(100% - ${kt}px) 100%, 0 100%, 0 ${kt}px)`,innerHalf:`polygon(${Nt}px 0, 100% 0, 100% 100%, 0 100%, 0 ${Nt}px)`,innerFull:`polygon(${Nt}px 0, 100% 0, 100% calc(100% - ${Nt}px), calc(100% - ${Nt}px) 100%, 0 100%, 0 ${Nt}px)`};let L,S,$,E,Z,ze;function T(){L=this.offsetWidth,S=this.offsetHeight,t(4,L),t(5,S)}return r.$$set=j=>{"color"in j&&t(0,m=j.color),"predicates"in j&&t(1,h=j.predicates),"hasSibling"in j&&t(12,b=j.hasSibling),"icon"in j&&t(13,I=j.icon),"variant"in j&&t(2,y=j.variant),"text"in j&&t(3,_=j.text),"$$scope"in j&&t(14,u=j.$$scope)},r.$$.update=()=>{r.$$.dirty&4096&&t(6,$=b?k.outerHalf:k.outerFull),r.$$.dirty&4096&&t(7,E=b?k.innerHalf:k.innerFull),r.$$.dirty&4100&&t(8,Z=(()=>{let j=0;return y==="function-curried"&&b?j=-12:y==="function-curried"?j=-10:b&&(j=-2),`${j}px`})()),r.$$.dirty&16&&t(11,n=`${L-yi*2}px`),r.$$.dirty&32&&t(10,i=`${S-yi*2}px`),r.$$.dirty&1&&t(9,ze=(()=>{try{return Qp(m).luminance()>.5?"black":"white"}catch{return"black"}})())},[m,h,y,_,L,S,$,E,Z,ze,i,n,b,I,u,l,T]}class ht extends ln{constructor(e){super(),on(this,e,of,sf,ar,{color:0,predicates:1,hasSibling:12,icon:13,variant:2,text:3})}}function _i(r,e,t){const n=r.slice();return n[9]=e[t],n[11]=t,n}function Ii(r,e,t){const n=r.slice();return n[9]=e[t],n[11]=t,n}function lf(r){let e,t;return e=new ht({props:{color:r[3],variant:"function",hasSibling:r[1],$$slots:{body:[bf],arg:[vf]},$$scope:{ctx:r}}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.color=n[3]),i&2&&(l.hasSibling=n[1]),i&8193&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function uf(r){let e,t,n,i;return e=new ht({props:{variant:"function-curried",color:r[3],hasSibling:r[1],$$slots:{default:[yf]},$$scope:{ctx:r}}}),n=new Ye({props:{ast:r[0].result}}),{c(){Se(e.$$.fragment),t=je(),Se(n.$$.fragment)},m(l,u){ye(e,l,u),ve(l,t,u),ye(n,l,u),i=!0},p(l,u){const m={};u&8&&(m.color=l[3]),u&2&&(m.hasSibling=l[1]),u&8193&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const h={};u&1&&(h.ast=l[0].result),n.$set(h)},i(l){i||(J(e.$$.fragment,l),J(n.$$.fragment,l),i=!0)},o(l){re(e.$$.fragment,l),re(n.$$.fragment,l),i=!1},d(l){l&&ue(t),_e(e,l),_e(n,l)}}}function cf(r){let e,t;return e=new ht({props:{color:r[3],hasSibling:r[1],$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.color=n[3]),i&2&&(l.hasSibling=n[1]),i&8195&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function pf(r){let e,t;return e=new ht({props:{color:r[3],hasSibling:r[1],$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.color=n[3]),i&2&&(l.hasSibling=n[1]),i&8195&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function ff(r){let e,t;return e=new ht({props:{color:r[3],hasSibling:r[1],text:r[0].children[0].source.slice(0,2),predicates:r[2],$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.color=n[3]),i&2&&(l.hasSibling=n[1]),i&1&&(l.text=n[0].children[0].source.slice(0,2)),i&4&&(l.predicates=n[2]),i&8195&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function hf(r){let e,t;return e=new ht({props:{color:r[3],hasSibling:r[1],text:r[0].source.slice(0,2)}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.color=n[3]),i&2&&(l.hasSibling=n[1]),i&1&&(l.text=n[0].source.slice(0,2)),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function df(r){let e,t;return e=new ht({props:{color:r[3],hasSibling:r[1],text:r[0].source,predicates:r[2]}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.color=n[3]),i&2&&(l.hasSibling=n[1]),i&1&&(l.text=n[0].source),i&4&&(l.predicates=n[2]),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function mf(r){let e,t;return e=new Ye({props:{hasSibling:r[1],ast:r[0].child}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&2&&(l.hasSibling=n[1]),i&1&&(l.ast=n[0].child),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function gf(r){let e;return{c(){e=oe("span"),e.textContent="Nothing to show here"},m(t,n){ve(t,e,n)},p:Ue,i:Ue,o:Ue,d(t){t&&ue(e)}}}function vf(r){let e,t;return e=new Ye({props:{slot:"arg",ast:r[0].arg}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.ast=n[0].arg),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function bf(r){let e,t;return e=new Ye({props:{slot:"body",ast:r[0].result}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.ast=n[0].result),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function yf(r){let e,t;return e=new Ye({props:{ast:r[0].arg}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.ast=n[0].arg),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function _f(r){let e,t;return e=new Ye({props:{hasSibling:r[1],ast:r[0].child}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&2&&(l.hasSibling=n[1]),i&1&&(l.ast=n[0].child),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function wi(r){let e,t;return e=new Ye({props:{ast:r[9],hasSibling:r[11]<r[0].children.length-1||r[1]}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.ast=n[9]),i&3&&(l.hasSibling=n[11]<n[0].children.length-1||n[1]),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function If(r){let e,t,n=Ot(r[0].children),i=[];for(let u=0;u<n.length;u+=1)i[u]=wi(_i(r,n,u));const l=u=>re(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=an()},m(u,m){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(u,m);ve(u,e,m),t=!0},p(u,m){if(m&3){n=Ot(u[0].children);let h;for(h=0;h<n.length;h+=1){const b=_i(u,n,h);i[h]?(i[h].p(b,m),J(i[h],1)):(i[h]=wi(b),i[h].c(),J(i[h],1),i[h].m(e.parentNode,e))}for(sr(),h=n.length;h<i.length;h+=1)l(h);or()}},i(u){if(!t){for(let m=0;m<n.length;m+=1)J(i[m]);t=!0}},o(u){i=i.filter(Boolean);for(let m=0;m<i.length;m+=1)re(i[m]);t=!1},d(u){u&&ue(e),nn(i,u)}}}function Si(r){let e,t;return e=new Ye({props:{ast:r[9],hasSibling:r[11]<r[0].children.length-2||r[1]}}),{c(){Se(e.$$.fragment)},m(n,i){ye(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.ast=n[9]),i&3&&(l.hasSibling=n[11]<n[0].children.length-2||n[1]),e.$set(l)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){re(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function wf(r){let e,t,n=Ot(r[0].children.slice(1)),i=[];for(let u=0;u<n.length;u+=1)i[u]=Si(Ii(r,n,u));const l=u=>re(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=an()},m(u,m){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(u,m);ve(u,e,m),t=!0},p(u,m){if(m&3){n=Ot(u[0].children.slice(1));let h;for(h=0;h<n.length;h+=1){const b=Ii(u,n,h);i[h]?(i[h].p(b,m),J(i[h],1)):(i[h]=Si(b),i[h].c(),J(i[h],1),i[h].m(e.parentNode,e))}for(sr(),h=n.length;h<i.length;h+=1)l(h);or()}},i(u){if(!t){for(let m=0;m<n.length;m+=1)J(i[m]);t=!0}},o(u){i=i.filter(Boolean);for(let m=0;m<i.length;m+=1)re(i[m]);t=!1},d(u){u&&ue(e),nn(i,u)}}}function Sf(r){let e,t,n,i;const l=[gf,mf,df,hf,ff,pf,cf,uf,lf],u=[];function m(h,b){return h[0].type===void 0?0:h[0].type===U.PAREN?1:h[0].type===U.VAR?2:h[0].type===U.CON?3:h[0].type===U.APP?4:h[0].type===U.TUPLE?5:h[0].type===U.LIST?6:h[0].type===U.FUN&&h[0].result.type===U.FUN?7:h[0].type===U.FUN?8:-1}return~(e=m(r))&&(t=u[e]=l[e](r)),{c(){t&&t.c(),n=an()},m(h,b){~e&&u[e].m(h,b),ve(h,n,b),i=!0},p(h,[b]){let I=e;e=m(h),e===I?~e&&u[e].p(h,b):(t&&(sr(),re(u[I],1,1,()=>{u[I]=null}),or()),~e?(t=u[e],t?t.p(h,b):(t=u[e]=l[e](h),t.c()),J(t,1),t.m(n.parentNode,n)):t=null)},i(h){i||(J(t),i=!0)},o(h){re(t),i=!1},d(h){h&&ue(n),~e&&u[e].d(h)}}}function xf(r,e,t){let n,i,l,u;ot(r,ts,_=>t(4,n=_)),ot(r,ns,_=>t(5,i=_)),ot(r,es,_=>t(6,l=_)),ot(r,Qi,_=>t(7,u=_));let{ast:m}=e,{hasSibling:h=!1}=e,b,I;function y(_,{varColors:k,conColors:L}){return _.type===U.VAR?k[_.source]:_.type===U.CON?L[_.source]:_.type===U.APP?y(_.children[0],{varColors:k,conColors:L}):_.type===U.LIST?L.List:_.type===U.FUN?L.Function:_.type===U.TUPLE?L.Tuple:void 0}return r.$$set=_=>{"ast"in _&&t(0,m=_.ast),"hasSibling"in _&&t(1,h=_.hasSibling)},r.$$.update=()=>{r.$$.dirty&245&&(m.type&&t(3,b=y(m,{varColors:u,conColors:l})),m.type===U.VAR?(console.log(i),console.log(n),t(2,I=(i.get(m.source)||[]).map(_=>n[_])),console.log(I)):m.type===U.APP&&m.children[0].type===U.VAR&&t(2,I=(i.get(m.children[0].source)||[]).map(_=>n[_])))},[m,h,I,b,n,i,l,u]}class Ye extends ln{constructor(e){super(),on(this,e,xf,Sf,ar,{ast:0,hasSibling:1})}}function Af(r){let e,t,n,i,l,u,m,h,b,I,y,_,k,L,S;return _=new Ye({props:{ast:r[2]}}),{c(){e=oe("main"),t=oe("label"),t.textContent="Haskell Type Signature:",n=oe("input"),i=je(),l=oe("div"),u=oe("span"),u.textContent="Text signature:",m=je(),h=oe("span"),b=ir(r[0]),I=je(),y=oe("div"),Se(_.$$.fragment),M(t,"class","svelte-j0be2j"),M(n,"class","svelte-j0be2j"),M(u,"class","svelte-j0be2j"),M(h,"class","svelte-j0be2j"),M(l,"class","svelte-j0be2j"),le(y,"display","grid"),M(y,"class","svelte-j0be2j"),le(y,"grid-template-columns",`repeat(${r[1]===0?1:r[1]}, auto)`),M(e,"class","svelte-j0be2j")},m($,E){ve($,e,E),K(e,t),K(e,n),Ja(n,r[0]),K(e,i),K(e,l),K(l,u),K(l,m),K(l,h),K(h,b),K(e,I),K(e,y),ye(_,y,null),k=!0,L||(S=Wr(n,"input",r[3]),L=!0)},p($,[E]){E&1&&n.value!==$[0]&&Ja(n,$[0]),(!k||E&1)&&ki(b,$[0]);const Z={};E&4&&(Z.ast=$[2]),_.$set(Z),E&2&&le(y,"grid-template-columns",`repeat(${$[1]===0?1:$[1]}, auto)`)},i($){k||(J(_.$$.fragment,$),k=!0)},o($){re(_.$$.fragment,$),k=!1},d($){$&&ue(e),_e(_),L=!1,S()}}}function Nf(r,e,t){let n,i,l;ot(r,rn,m=>t(0,n=m)),ot(r,rs,m=>t(1,i=m)),ot(r,Xi,m=>t(2,l=m));function u(){n=this.value,rn.set(n)}return[n,i,l,u]}class kf extends ln{constructor(e){super(),on(this,e,Nf,Af,ar,{})}}new kf({target:document.getElementById("app")});
